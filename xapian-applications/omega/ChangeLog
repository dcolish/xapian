Sat Jan 14 22:40:43 GMT 2006  Olly Betts <olly@survex.com>

	* configure.ac: Copy over fixed snprintf checks from xapian-core.

Fri Jan 13 03:21:15 GMT 2006  Olly Betts <olly@survex.com>

	* configure.ac: The configure test for snprintf uses memcmp, so
	  we need to "#include <string.h>" for it to work reliably.

Mon Jan 09 04:23:54 GMT 2006  Olly Betts <olly@survex.com>

	* date.cc,query.cc: Add "#include <stdarg.h>" where we use
	  va_list, etc.

Mon Jan 09 04:17:54 GMT 2006  Olly Betts <olly@survex.com>

	* cdb_init.cc: Fix more compilation issues with cdb no-mmap code.

Mon Jan 09 03:42:18 GMT 2006  Olly Betts <olly@survex.com>

	* omega.cc,utils.cc,utils.h: Replace remaining use of split with
	  a direct walk of the string.

Mon Jan 09 03:19:49 GMT 2006  Olly Betts <olly@survex.com>

	* query.cc: Don't split strings of docids in R parameters into a
	  vector<string> - just walk the string directly.  The code is
	  as simple, and much more efficient if a lot of documents are
	  marked relevant.

Mon Jan 09 02:46:34 GMT 2006  Olly Betts <olly@survex.com>

	* Makefile.am,date.cc,omindex.cc,query.cc,scriptindex.cc,utils.cc,
	  utils.h: Use snprintf where available.

Sun Jan 08 22:41:47 GMT 2006  Olly Betts <olly@survex.com>

	* cdb_init.cc: Fixed malloc-based version to compile.

Sun Jan 08 21:05:46 GMT 2006  Olly Betts <olly@survex.com>

	* cdb_find.cc,cdb_hash.cc,cdb_unpack.cc: #include <config.h>.
	* configure.ac: Test for mmap.
	* cdb_init.cc: If mmap isn't found, and this isn't WIN32 fall back on
	  the very crude approach of loading the whole file into a malloc-ed
	  block.  For a small cdb file, that'll give acceptable performance
	  at least.

Fri Jan 06 21:29:37 GMT 2006  Olly Betts <olly@survex.com>

	* symboltab.h: Fix A after \xbf being interpereted as an overlong
	  escape sequence.

Fri Jan 06 21:26:57 GMT 2006  Olly Betts <olly@survex.com>

	* query.cc: Fix printf type mismatch on 64 bit platforms.

Fri Jan 06 21:00:34 GMT 2006  Olly Betts <olly@survex.com>

	* docs/omegascript.txt,query.cc: Added $find{LIST,STRING}.

Fri Jan 06 20:52:31 GMT 2006  Olly Betts <olly@survex.com>

	* symboltab.h: Write top-bit set characters using \xXX notation to
	  avoid warnings from Intel's C++ compiler.

Fri Jan 06 18:15:42 GMT 2006  Olly Betts <olly@survex.com>

	* query.cc: Removed unused variable.

Fri Jan 06 18:14:33 GMT 2006  Olly Betts <olly@survex.com>

	* query.cc: Cast time_t to unsigned long to avoid problems on 64bit
	  platforms.

Fri Jan 06 18:12:38 GMT 2006  Olly Betts <olly@survex.com>

	* docs/omegascript.txt: Note in the $cgi description that it returns
	  an arbitrary value if there's more than one, and pointing to
	  $cgilist.

Thu Jan 05 05:54:58 GMT 2006  Olly Betts <olly@survex.com>

	* cdb_init.cc: Fix mingw compilation.

Thu Jan 05 03:24:07 GMT 2006  Olly Betts <olly@survex.com>

	* cdb_init.cc: Fix to hopefully compile on Solaris which has a broken
	  sys/mman.h when used from C++.

Wed Jan 04 20:44:44 GMT 2006  Olly Betts <olly@survex.com>

	* query.cc: Fixed to compile with GCC 3.0.

Wed Jan 04 04:33:15 GMT 2006  Olly Betts <olly@survex.com>

	* Makefile.am,cdb.h,cdb_find.cc,cdb_hash.cc,cdb_init.cc,cdb_int.h,
	  cdb_unpack.cc,configfile.cc,configfile.h,docs/omegascript.txt,
	  omega.conf,query.cc: Add $lookup{CDBFILE,KEY} command to perform
	  a lookup in a CDB file.

Wed Jan 04 03:06:31 GMT 2006  Olly Betts <olly@survex.com>

	* docs/omegascript.txt,docs/overview.txt,query.cc: Added new feature
	  which allows you to avoid storing fieldnames in every document
	  (which can save a lot of disk space for a large database).  Instead
	  you just store the field values, one per line, and add something
	  like "$set{fieldnames,$split{caption sample url}}" to the
	  OmegaScript template to specify the fieldnames to use.
	* docs/omegascript.txt,query.cc: Add new "$split{}" command which
	  splits a string to give an OmegaScript list.
	* query.cc: Fix $url{} to escape "+" to "%2b".
	* query.cc: Speed up $highlight{} - only compare terms which are the
	  same length.

Tue Jan 03 22:38:01 GMT 2006  Olly Betts <olly@survex.com>

	* configfile.cc: Rename file_readable() to file_exists() to better
	  reflect what the function actually does!

Tue Jan 03 17:43:40 GMT 2006  Olly Betts <olly@survex.com>

	* templates/opensearch: Add missing escaping.

Mon Dec 19 10:27:30 GMT 2005  Olly Betts <olly@survex.com>

	* Makefile.am,commonhelp.cc,commonhelp.h,docs/overview.txt,omindex.cc,
	  scriptindex.cc: Add "--stemmer" option to omindex and scriptindex
	  to allow the stemming language to be set.
	* omindex.cc,scriptindex.cc: More consistent --help and --version
	  output.  Update FSF address.

Mon Dec 19 06:03:31 GMT 2005  Olly Betts <olly@survex.com>

	* query.cc: Explicitly use "unsigned char" when %-encoding in $url
	  so that top bit set characters are correctly handled on platforms
	  where char is signed by default.

Sun Dec 11 09:30:44 GMT 2005  Olly Betts <olly@survex.com>

	* templates/godmode: If a non-existant docid is specified, report the
	  error and prompt the user to enter another docid.  Fixes bug#60.

Sun Dec 11 09:27:18 GMT 2005  Olly Betts <olly@survex.com>

	* docs/cgiparams.txt,omega.cc,omega.h,query.cc: Add "SORTREVERSE"
	  CGI parameter which allows the sort order to be reversed when
	  sorting on a value.  Remove "SORTBANDS" CGI parameter since it
	  no longer does anything.
 
Sun Dec 11 09:26:14 GMT 2005  Olly Betts <olly@survex.com>

	* omindex.cc: Improve wording of comment.

Sun Dec 11 09:22:58 GMT 2005  Olly Betts <olly@survex.com>

	* docs/overview.txt,omindex.cc: Add support for OpenDocument format
	  mimetypes and extensions out of the box.

Sun Dec 11 09:16:57 GMT 2005  Olly Betts <olly@survex.com>

	* docs/omegascript.txt,query.cc: If executing an OmegaScript command
	  causes a Xapian exception to be thrown, catch it and copy the error
	  message into error_msg (which is read by the $error command).

Sun Dec 11 09:12:12 GMT 2005  Olly Betts <olly@survex.com>

	* htmlparse.cc: Tweak a few comments; "while (1)" -> "while (true)".

Sun Dec 11 09:09:40 GMT 2005  Olly Betts <olly@survex.com>

	* docs/overview.txt: The U prefix (URL term) was grouped with the date
	  searching prefixes, but it makes more sense to group it with the
	  prefixes relating to parts of the URL (H for hostname, P for path,
	  etc).

Sun Oct 02 16:28:59 BST 2005  Olly Betts <olly@survex.com>

	* scriptindex.cc: Use "int database_mode" (set to the value to pass to
	  WritableDatabase's ctor) instead of "bool overwrite" to implement
	  --overwrite.
	* scriptindex.cc: Remove code to handle "-q" as it no longer actually
	  controls anything.  Just ignore it for backwards compatibility.
	* scriptindex.cc: Tweak --help output to not wrap on a default
	  install.

Sat Sep 10 14:57:19 BST 2005  Olly Betts <olly@survex.com>

	* docs/omegascript.txt: Improve descriptions of $collapsed, $value,
	  $version.

Fri Jul 29 10:05:21 BST 2005  James Aylett  <james@tartarus.org>

	* omindex.cc: add --preserve-nonduplicates / -p option to not
	  delete any documents that aren't updated, in replace duplicates
	  mode (so that multiple runs of omindex on different subsites
	  don't stomp on each other).

	* docs/overview.txt: update to match the above.

Fri Jul 15 11:12:28 BST 2005  Olly Betts <olly@survex.com>

	* configure.ac: Updated for 0.9.2.

Fri Jul 15 02:18:40 BST 2005  Olly Betts <olly@survex.com>

	* NEWS: Updated for 0.9.2.

Sat Jul 02 14:56:35 BST 2005  Olly Betts <olly@survex.com>

	* query.cc: Workaround further Sun C++ crapness.

Wed Jun 29 03:19:22 BST 2005  Olly Betts <olly@survex.com>

	* docs/omegascript.txt,query.cc: Changed $highlight so
	  if OPEN and CLOSE aren't specified, they default to
	  highlighting each word from the query with a different
	  background colour like gmane does (previous default was to use
	  '<strong>' and '</strong>').
	* query.cc: Removed surplus whitespace.

Fri Jun 24 02:51:38 BST 2005  Olly Betts <olly@survex.com>

	* query.cc: Call QueryParser::set_database() as this is now used to
	  decide what to do for terms like "C#".
	* docs/omegascript.txt,docs/termprefixes.txt,query.cc: Add the
	  ability to set boolean prefixes for the QueryParser by setting
	  a "boolprefix" map in the omegascript template.

Fri Jun 24 02:40:10 BST 2005  Olly Betts <olly@survex.com>

	* scriptindex.cc: Fix infinite loop if there's no newline at the end
	  of a dumpfile.

Thu Jun 23 16:42:41 BST 2005  Olly Betts <olly@survex.com>

	* docs/termprefixes.txt: Explain who to use termprefixes with
	  scriptindex and omega, since that's what most people will want to
	  know.

Thu Jun 23 16:41:15 BST 2005  Olly Betts <olly@survex.com>

	* query.cc,docs/omegascript.txt: Added $length{} and $stoplist{}
	  commands to OmegaScript.
	* docs/omegascript.txt: Use standard "S" prefix for title in example
	  for $setmap, rather than "XT".

Mon Jun 06 17:59:10 BST 2005  Olly Betts <olly@survex.com>

	* NEWS: Another 0.9.1 update.

Mon Jun 06 17:52:44 BST 2005  Olly Betts <olly@survex.com>

	* NEWS: Updated for 0.9.1.

Mon Jun 06 17:51:58 BST 2005  Olly Betts <olly@survex.com>

	* configure.ac: Updated for 0.9.1.

Mon May 23 23:36:48 BST 2005  Fabrice Colin <fabrice.colin@gmail.com>

	* omega.spec.in: Updated for 0.9.0.

Fri May 13 23:21:02 BST 2005  Olly Betts <olly@survex.com>

	* NEWS: Updated for 0.9.0.

Fri May 13 00:39:44 BST 2005  Olly Betts <olly@survex.com>

	* configure.ac: Updated for 0.9.0.

Fri May 13 00:35:21 BST 2005  Olly Betts <olly@survex.com>

	* scriptindex.cc: Improved handling of extra blank lines in dump file;
	  Strip multiple \r characters from end of line;  Complain if a dump
	  file doesn't appear to have been = escaped correctly;  Flush
	  database after each input file to ensure all changes from a file
	  make it in.
	* docs/omegascript.txt: Whitespace tweak.

Wed May 11 02:28:41 BST 2005  Olly Betts <olly@survex.com>

	* NEWS: Started to update for 0.9.0.

Sun May 08 02:16:07 BST 2005  Olly Betts <olly@survex.com>

	* query.cc: Use Query::get_terms_begin() not
	  QueryParser::termlist_begin().

Sun May 08 02:11:49 BST 2005  Olly Betts <olly@survex.com>

	* Makefile.am: Use AM_CPPFLAGS not CPPFLAGS (CPPFLAGS is for the
	  user).

Wed May  4 11:32:18 BST 2005  Richard Boulton <richard@tartarus.org>

	* configfile.cc: Configuration file is now looked for in various
	  locations: the first location in which a file is found is used.
	  Firstly, if the OMEGA_CONFIG_FILE environment variable is set,
	  the location given in it is checked.  Secondly, the file
	  "omega.conf" in the same directory as the executable is checked.
	  Finally, the file "${sysconfdir}/omega.conf" (eg, /etc/omega.conf
	  on Linux) is checked.  If none of these locations contain a file,
	  default values are used.
	* docs/overview.txt: Update to describe new configuration file
	  locations.
	* Makefile.am: Install omega.conf to ${sysconfdir} by default.
	  Define CONFIGFILE_SYSTEM with an appropriate value to find the
	  system configuration file.

Wed May  4 11:20:26 BST 2005  Richard Boulton <richard@tartarus.org>

	* query.cc: Use new set_stemming_strategy() API method, rather than
	  old set_stemming_options() method.  The old method didn't compile
	  because it's being passed a stemming_strategy value, which there
	  isn't a prototype for.

Fri Apr 29 10:27:05 BST 2005  Olly Betts <olly@survex.com>

	* scriptindex.cc: Improved comments.

Fri Apr 15 03:12:02 BST 2005  Olly Betts <olly@survex.com>

	* docs/termprefixes.txt: Updated QueryParser prefix documentation to
	  remove references to CVS HEAD.
	* docs/termprefixes.txt: Capitalise "Month" to indicate why it has
	  prefix "M" (in line with all the other entries in the list).

Fri Apr 15 02:55:06 BST 2005  Olly Betts <olly@survex.com>

	* indextext.cc: Generate terms like "c#".
	* query.cc: Highlight words like "C#".

Fri Apr 15 02:53:22 BST 2005  Olly Betts <olly@survex.com>

	* query.cc: Clearer code for adding boolean filters are added to the
	  query.

Wed Apr 06 02:47:14 BST 2005  Olly Betts <olly@survex.com>

	* omindex.cc: Tweak the hashing of URLs so that it works the same
	  way on all platforms (previously it would depend on sizeof(long)).
	  This means an incompatibility with any existing database built on
	  a platform where sizeof(long) > 4 where URLs were hashed (i.e.
	  URLs were > 228 bytes if sizeof(long) == 8), but we really want
	  databases to be portable between platforms.

Wed Apr 06 02:44:58 BST 2005  Olly Betts <olly@survex.com>

	* omindex.cc,docs/overview.txt: Removed useless "DUPE_duplicate"
	  option.

Wed Apr 06 00:48:08 BST 2005  Olly Betts <olly@survex.com>

	* omindex.cc,docs/overview.txt: Added support for using pod2text for
	  indexing Perl documentation.

Wed Apr 06 00:25:47 BST 2005  Olly Betts <olly@survex.com>

	* omindex.cc,docs/overview.txt: Replace -l/--no-recurse with
	  -l/--depth-limit which takes an argument allowing recursion
	  to be restriction to any depth, not just 0 or infinite!

Tue Apr 05 23:45:39 BST 2005  Olly Betts <olly@survex.com>

	* mbox2omega,mbox2omega.script,Makefile.am: Added mbox2omega which
	  allows a mail folder to be indexed.  Mostly it's an example as
	  there's no mechanism included to show the full original message.

Tue Apr 05 23:41:44 BST 2005  Olly Betts <olly@survex.com>

	* scriptindex.cc: Tidy up STL header includes.

Tue Apr 05 23:34:36 BST 2005  Olly Betts <olly@survex.com>

	* docs/omegascript.txt: Clarify $field description slightly.

Tue Apr 05 23:33:33 BST 2005  Olly Betts <olly@survex.com>

	* indextext.h: Add typedefs to allow AccentNormalisingItor to be used
	  as an STL iterator.

Tue Apr 05 00:47:52 BST 2005  Olly Betts <olly@survex.com>

	* docs/cgiparams.txt,docs/omegascript.txt: Fixed 3 references to
	  OmXxxx classes.

Tue Apr 05 00:41:45 BST 2005  Olly Betts <olly@survex.com>

	* debian/.cvsignore,.cvsignore: Remove .cvsignore files, as they're
	  not used by SVN.

Mon Mar 21 16:43:07 GMT 2005  Richard Boulton <richard@tartarus.org>

	* templates/opensearch: Add new template to implement basic
	  opensearch feeds of search results.
	* Makefile.am: Include opensearch template in distribution.

Thu Mar 03 02:20:26 GMT 2005  Olly Betts <olly@survex.com>

	* templates/query2: Remove Sam's unfinished rewrite of the query
	  template.  It's not been worked on for nearly two years, and we
	  don't ship it.

Wed Mar 02 03:09:52 GMT 2005  Olly Betts <olly@survex.com>

	* COPYING: Put in CVS.

Tue Mar 01 02:09:35 GMT 2005  Olly Betts <olly@survex.com>

	* omindex.cc,docs/overview.txt: Extend -M/--mime-type to allow an
	  existing mapping to be removed by omitting the type.

Thu Feb 24 17:42:35 GMT 2005  Olly Betts <olly@survex.com>

	* Makefile.am: Actually ship docs/termprefixes.txt (and make it harder
	  to fail to ship new docs in future).

Thu Feb 24 02:10:09 GMT 2005  Olly Betts <olly@survex.com>

	* Makefile.am,docs/termprefixes.txt: Added a single document covering
	  all aspects of term prefixes.

Wed Feb 23 14:59:46 GMT 2005  Olly Betts <olly@survex.com>

	* docs/omegascript.txt: Moved $collapsed into correct place
	  alphabetically!

Wed Feb 16 03:46:51 GMT 2005  Olly Betts <olly@survex.com>

	* docs/cgiparams.txt,docs/overview.txt: Improved description of how
	  B filters are handled when building the query.

Wed Feb 16 03:44:24 GMT 2005  Olly Betts <olly@survex.com>

	* omindex.cc: Fixed so that we get lstat() prototype on Linux systems
	  where we have posix_fadvise().

Mon Jan 17 03:35:35 GMT 2005  Olly Betts <olly@survex.com>

	* query.cc: Corrected a comment.

Mon Jan 17 03:32:25 GMT 2005  Olly Betts <olly@survex.com>

	* query.cc: Updated to use the new QueryParser API.

Wed Jan 05 03:15:43 GMT 2005  Olly Betts <olly@survex.com>

	* docs/scriptindex.txt: Note that actions are applied in the specified
	  order.

Thu Dec 23 19:12:57 GMT 2004  Olly Betts <olly@survex.com>

	* INSTALL: "xapian-examples" -> "omega".

Thu Dec 23 19:10:04 GMT 2004  Olly Betts <olly@survex.com>

	* configure.ac,NEWS: Version 0.8.5.

Thu Dec 23 19:09:01 GMT 2004  Olly Betts <olly@survex.com>

	* INSTALL,README: Added better installation instructions.

Mon Dec 20 17:26:26 GMT 2004  Olly Betts <olly@survex.com>

	* configure.ac,omindex.cc: Fixed "ignore symlinks" code to compile on
	  systems without lstat (e.g. mingw).

Mon Dec 20 12:18:18 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Fix the "ignore symlinks" code to actually compile on
	  certain Linux boxes.

Mon Dec 20 11:33:59 GMT 2004  Olly Betts <olly@survex.com>

	* query.cc: If an exception is thrown, make sure that the HTTP headers
	  get written so that we don't cause "500 Internal Server Error".
	  This problem was introduced by the change to allow a user specified
	  Content-Type in 0.8.0.  Partly addresses bug#60.

Fri Dec 17 22:50:01 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Only try to delete removed documents in DUPE_replace
	  mode.

Thu Dec 16 11:43:28 GMT 2004  Olly Betts <olly@survex.com>

	* scriptindex.cc: Fixed "Unknown Exception" when trying to "unhtml"
	  text which contains "</body>" (bug#61).  This bug was introduced in
	  0.8.4.

Thu Dec 16 11:28:25 GMT 2004  Olly Betts <olly@survex.com>

	* myhtmlparse.cc: <h1> - <h6> and </h1> - </h6> should leave a
	  space into the dumped HTML.

Wed Dec 15 15:53:55 GMT 2004  Richard Boulton <richard@tartarus.org>

	* dbi2omega: Add a comment to the start of the file detailing what
	  dbi2omega does.

Wed Dec 15 15:08:41 GMT 2004  Richard Boulton <richard@tartarus.org>

	* omindex.cc: Change behaviour of crawler such that it doesn't
	  follow symbolic links any more.  Add "--follow" command
	  line option to turn following of symlinks back on.

Wed Dec 08 16:31:46 GMT 2004  Olly Betts <olly@survex.com>

	* NEWS: Final update for 0.8.4.

Tue Dec 07 18:16:32 GMT 2004  Olly Betts <olly@survex.com>

	* indextext.h: Fixed to compile with GCC 3.x.

Tue Dec 07 18:15:39 GMT 2004  Olly Betts <olly@survex.com>

	* omega.cc,omindex.cc,scriptindex.cc: Use the new
	  Database/WritableDatabase constructors.

Tue Nov 30 22:02:33 GMT 2004  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Updated for 0.8.4 release.

Wed Nov 24 04:50:52 GMT 2004  Olly Betts <olly@survex.com>

	* templates/godmode: Finished off godmode template.

Wed Nov 24 04:12:09 GMT 2004  Olly Betts <olly@survex.com>

	* query.cc: If there's only a boolean query so we promote it to be
	  the query, switch to boolean weights.

Wed Nov 24 03:29:36 GMT 2004  Olly Betts <olly@survex.com>

	* Makefile.am,myhtmlparse.cc,myhtmlparse.h,omindex.cc,scriptindex.cc:
	  Factored out MyHtmlParser into a separate file so it can be used
	  in scriptindex too to give scriptindex the same improved HTML
	  parsing which omindex just got.

Wed Nov 24 02:22:49 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Removed bogus extra line from code which was meant to
	  truncate at a word boundary, but has never actually worked!

Wed Nov 24 02:20:36 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Improved HTML to text conversion - the parser now knows
	  that some tags should be regarded as word breaks and some shouldn't
	  (previously all tags were treated as word breaks).

Wed Nov 24 00:22:39 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Removed debug output; don't include \xa0 in the list of
	  whitespace characters for now, as that's a bit character set
	  specific...

Wed Nov 24 00:04:42 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: HTML extraction now turns strips leading and trailing
	  whitespace and converts all other consecutive groups of whitespace
	  to a single space.

Tue Nov 23 20:29:14 GMT 2004  Olly Betts <olly@survex.com>

	* Makefile.am: XAPIAN_FLAGS already links with xapianqueryparser
	  so remove -lxapianqueryparser from omega_LDADD as it was causing
	  problems on cygwin.

Wed Nov 17 18:51:28 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Index RTF documents with unrtf, if available.
	* docs/overview.txt: Document this.

Wed Nov 17 16:31:01 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: If a filename to be passed to a filter program has a
	  leading "-", protect it from possible interpretation as an option
	  by prepending "./".

Wed Nov 17 16:29:55 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Index Wordperfect documents with wpd2text, if available.
	* docs/overview.txt: Document this.

Wed Nov 17 15:12:08 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Index MS Word documents with antiword, if available.
	* docs/overview.txt: Document this.

Wed Nov 17 04:29:15 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Add simple code to index OpenOffice documents.
	* docs/overview.txt: Update documentation to mention this.

Tue Nov 09 03:04:44 GMT 2004  Olly Betts <olly@survex.com>

	* configure.ac,Makefile.am: We now get -AA or -std strict_ansi from
	  xapian-config, so we don't need to probe for them ourselves.

Sun Nov 07 16:36:42 GMT 2004  Olly Betts <olly@survex.com>

	* utils.cc: Fixed to work with updated snprintf configure test,

Sun Nov 07 04:55:26 GMT 2004  Olly Betts <olly@survex.com>

	* configure.ac: rearrange so that libtool is active when we test if
	  the c++ compiler can link a program so it can pull in libstdc++
	  through a .la file; updated snprintf test to the new one from
	  xapian-core.

Fri Nov 05 17:20:13 GMT 2004  Olly Betts <olly@survex.com>

	* configure.ac: AM_CONFIG_HEADER -> AC_CONFIG_HEADERS; Run tests using
	  the C++ compiler; select ANSI mode for aCC and cxx; Check GXX not
	  GCC when chosing warning flags.

Wed Nov 03 20:15:34 GMT 2004  Olly Betts <olly@survex.com>

	* query.cc: Updated to use Query::empty() instead of
	  Query::is_empty().

Wed Nov 03 20:12:37 GMT 2004  Olly Betts <olly@survex.com>

	* Makefile.am,getopt.cc,getopt.h,getopt1.cc,gnu_getopt.h,omindex.cc,
	  scriptindex.cc: Updated to reworked getopt from xapian-core.

Wed Nov 03 04:11:03 GMT 2004  Olly Betts <olly@survex.com>

	* getopt.cc: Defining _NO_PROTO is a really bad idea for C++ code!

Tue Nov 02 18:54:12 GMT 2004  Olly Betts <olly@survex.com>

	* getopt.cc: Protect getopt definition for possible getopt macro
	  declared in getopt.h.

Tue Nov 02 17:56:08 GMT 2004  Olly Betts <olly@survex.com>

	* indextext.h: Fixed 2 warnings.

Tue Nov 02 06:54:17 GMT 2004  Olly Betts <olly@survex.com>

	* getopt.cc,getopt1.cc: Fixed function declarations to not use K&R C
	  syntax.

Tue Nov 02 05:40:06 GMT 2004  Olly Betts <olly@survex.com>

	* Makefile.am,configure.ac,getopt.c,getopt1.c,getopt.cc,getopt1.cc:
	  Compile everything as C++.

Mon Sep 20 14:52:24 BST 2004  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Version 0.8.3.

Mon Sep 20 14:49:26 BST 2004  Olly Betts <olly@survex.com>

	* Makefile.am,configure.ac: Require same versions of autoconf and
	  automake that xapian-core does.

Mon Sep 20 14:45:53 BST 2004  Olly Betts <olly@survex.com>

	* omega.spec.in: Update from Fabrice Colin.  The most notable change
	  is that the RPM is now called xapian-omega because there's already
	  an omega RPM (in Fedora Core at least) which is some game.

Thu Sep 16 00:57:13 BST 2004  Olly Betts <olly@survex.com>

	* cgiparam.cc,configfile.cc,configfile.h,htmlparse.cc,indextext.cc,
	  omega.cc,omindex-config.cc: All C++ sources should #include
	  <config.h> as the first header; no header files should #include
	  <config.h>.

Thu Sep 16 00:54:31 BST 2004  Olly Betts <olly@survex.com>

	* scriptindex.cc: --version now actually reports the version.  --help
	  now exits with status 0 rather than status 1.

Tue Sep 14 03:00:32 BST 2004  Olly Betts <olly@survex.com>

	* omega.spec.in: Updated URL for sources; include htdig2omega and
	  htdig2omega.script in the RPM.

Tue Sep 14 02:56:52 BST 2004  Olly Betts <olly@survex.com>

	* Makefile.am: Install htdig2omega.script in ${prefix}/share/omega/
	  rather than ${prefix}/share/.

Mon Sep 13 03:22:55 BST 2004  Olly Betts <olly@survex.com>

	* NEWS,configure.ac: Version 0.8.2.

Thu Sep 09 15:11:45 BST 2004  Olly Betts <olly@survex.com>

	* NEWS: Updated.

Thu Sep 09 14:41:41 BST 2004  Olly Betts <olly@survex.com>

	* query.cc: Use new checkatleast parameter to Enquire::get_mset to
	  implement MINHITS.

Thu Sep 02 01:45:46 BST 2004  Olly Betts <olly@survex.com>

	* templates/query: Always report database not found - previously we
	  only did so if there was a query.  Also fixed missing </center>
	  tag which happened in certain cases.

Wed Aug 25 23:19:47 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: When running with "replace duplicates" mode (the
	  default), detect documents removed since the last indexing
	  run and delete them from the database (bug #34).

Tue Aug 24 19:23:55 BST 2004  Olly Betts <olly@survex.com>

	* omega.cc: Added FIXME comment noting that SORT and SORTBANDS should
	  be tracked and the results reset to the first page if they change.

Tue Aug 24 19:23:07 BST 2004  Olly Betts <olly@survex.com>

	* Makefile.am: Install htdig2omega and htdig2omega.script.

Mon Aug 23 22:29:53 BST 2004  Olly Betts <olly@survex.com>

	* scriptindex.cc: Report index file name and line number when
	  reporting errors in it.  Added warning for redundant actions,
	  such as "truncate" as the last action in a rule.

Mon Aug 23 22:03:25 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Use the new replace_document(term, doc) method.

Sun Aug 22 13:11:23 BST 2004  Olly Betts <olly@survex.com>

	* configure.in,configure.ac: Renamed configure.in to configure.ac.

Sat Aug 21 12:41:43 BST 2004  Olly Betts <olly@survex.com>

	* docs/omegascript.txt: Added note about that $add{$hit,1} gives
	  the "hit number".

Fri Aug 20 20:28:16 BST 2004  Olly Betts <olly@survex.com>

	* Makefile.am: Link with -lxapianqueryparser, not -lomqueryparser.

Thu Aug 19 19:13:34 BST 2004  Olly Betts <olly@survex.com>

	* Makefile.am: And actually ship htdig2omega and htdig2omega.script!

Thu Aug 19 19:02:40 BST 2004  Olly Betts <olly@survex.com>

	* htdig2omega,htdig2omega.script: Added perl script and corresponding
	  scriptindex index script which allow an ht://dig database to be
	  imported into Xapian.  This provides an easy way to provide a search
	  of remote websites using omega (by spidering them with ht://dig).

Sun Aug 15 01:48:58 BST 2004  Olly Betts <olly@survex.com>

	* indextext.cc,indextext.h,omindex.cc,query.cc,scriptindex.cc,
	  symboltab.h: Fixed $highlight to understand accented characters
	  (bug#9).

Wed Jun 30 14:58:12 BST 2004  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Version 0.8.1.

Tue Jun 29 17:26:41 BST 2004  Richard Boulton <richard@tartarus.org>

	* Makefile.am: Remove Debian files from distribution tarballs,
	  since there will often be multiple patch releases for each
	  release.  Debian files will be available from an apt repository
	  in future.

Tue Jun 29 01:45:06 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Renamed hash() to hash_string() to avoid colliding
	  with something on IRIX;  Removed explicit initialisation of
	  mime_types - perhaps that's spooking the SGI CC prelinker.

Sun Jun 27 23:47:35 BST 2004  Olly Betts <olly@survex.com>

	* omega.cc: Change MORELIKE to pick up to 40 terms, rather than up to
	  6 (feedback on the mailing list suggests this gives much better
	  results).

Fri Jun 11 02:22:38 BST 2004  Olly Betts <olly@survex.com>

	* scriptindex.cc: Added catch for std::bad_alloc.

Mon Apr 19 14:43:17 BST 2004  Olly Betts <olly@survex.com>

	* NEWS: Final update for 0.8.0.

Sun Apr 18 22:31:24 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Only need _POSIX_C_SOURCE on Linux, and it seems to
	  cause problems with Sun's C++ compiler.

Sun Apr 18 17:50:35 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: _POSIX_C_SOURCE works better than _POSIX_SOURCE for
	  making posix_fadvise prototype visible on Linux.

Thu Apr 15 02:05:49 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: And another _POSIX_SOURCE attempt!

Thu Apr 15 01:43:51 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Another stab at _POSIX_SOURCE...

Thu Apr 15 01:25:29 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Added a missing underscore (_POSIX_SOURCE not
	  POSIX_SOURCE!)

Thu Apr 15 00:48:12 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Defined POSIX_SOURCE to a suitable value to get
	  posix_fadvise on some versions of redhat.

Mon Apr 12 01:06:58 BST 2004  Olly Betts <olly@survex.com>

	* NEWS,configure.in: Version 0.8.0.

Mon Apr 12 00:03:57 BST 2004  Olly Betts <olly@survex.com>

	* indextext.cc,query.cc: Don't create R terms for terms which start
	  with a digit.

Sun Apr 11 23:47:33 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Fixed inconsistent indenting.

Sun Apr 11 23:11:51 BST 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Call posix_fadvise with POSIX_FADV_DONTNEED just before
	  closing an input file.  Again should help improve indexing
	  throughput.

Fri Apr 02 16:09:03 BST 2004  Olly Betts <olly@survex.com>

	* configure.in,omindex.cc: Use O_STREAMING and/or posix_fadvise()
	  when reading files to be indexed (if available).  This helps to
	  keep the Xapian database in cache, and greatly improve indexing
	  throughput.

Tue Mar 30 00:06:15 BST 2004  Olly Betts <olly@survex.com>

	* NEWS: We're now putting omega news here rather than in xapian-core
	  so composed draft version for the forthcoming 0.8.0 release.

Tue Mar 29 23:56:27 BST 2004  Olly Betts <olly@survex.com>

	* templates/xml: Remove unused OmegaScript code:
	  `$set{topterms,$or{$ne{$msize,0},$query}}'.

Tue Mar 29 23:55:40 BST 2004  Olly Betts <olly@survex.com>

	* Makefile.am: scriptindex needs to link to getopt.c and getopt1.c.

Tue Mar 23 19:20:19 GMT 2004  Olly Betts <olly@survex.com>

	* templates/xml: Correct spelling of `relavence' to `relevance'.
	  NB: if you're parsing the XML output, you'll need to fix this
	  spelling in your parser!

Sun Mar 21 14:23:23 GMT 2004  Olly Betts <olly@survex.com>

	* scriptindex.cc: Use getopt for option parsing.  Change default to
	  *not* overwriting the database (use --overwrite if you really want
	  to do this); -u is now accepted but ignored.

Fri Mar 12 02:11:28 GMT 2004  Olly Betts <olly@survex.com>

	* templates/xml: "Content-Type: application/html" is more appropriate
	  than text/xml.

Fri Mar 12 02:09:33 GMT 2004  Olly Betts <olly@survex.com>

	* omindex.cc: Added --overwrite option which forces an existing
	  database to be deleted before indexing begins.

Wed Mar 10 14:39:13 GMT 2004  Olly Betts <olly@survex.com>

	* templates/xml: "Content-Type: text/xml".

Wed Mar 10 00:08:40 GMT 2004  Olly Betts <olly@survex.com>

	* docs/scriptindex.txt: Make more explicit that boolean produces a
	  *single* boolean term.

Tue Mar 09 19:08:19 GMT 2004  Olly Betts <olly@survex.com>

	* indextext.cc,omindex.cc,scriptindex.cc: Updated to use add_term()
	  instead of add_term_nopos().

Wed Mar 03 14:55:50 GMT 2004  Olly Betts <olly@survex.com>

	* scriptindex.cc: Use true/false for assigning to booleans, not 1/0.

Sat Feb 21 18:33:15 GMT 2004  Olly Betts <olly@survex.com>

	* omega.cc,query.cc,docs/omegascript.txt: Added $httpheader
	  Omegascript to allow arbitrary HTTP headers and alternative
	  Content-Type headers to be specified.

Sat Feb 14 00:32:06 GMT 2004  Olly Betts <olly@survex.com>

	* query.cc: If the probabilistic query was bad, don't try to run the
	  match.

Sat Feb 14 00:11:52 GMT 2004  Olly Betts <olly@survex.com>

	* docs/cgiparams.txt: Note that START and END should be in the format
	  YYYYMMDD.

Sat Feb 14 00:07:41 GMT 2004  Olly Betts <olly@survex.com>

	* query.cc: Don't crash if there's a date filter but no probabilistic
	  query.

Wed Nov 26 22:44:49 GMT 2003  Olly Betts <olly@survex.com>

	* indextext.cc: Raw terms with a multicharacter prefix are now indexed
	  with a : inserted (e.g. as XFOO:Rterm).  This matches what the query
	  parser does.

Wed Nov 26 16:25:16 GMT 2003  Olly Betts <olly@survex.com>

	* configure.in: Version 0.7.5.

Sun Nov 23 03:28:21 GMT 2003  Olly Betts <olly@survex.com>

	* query.cc,docs/omegascript.txt: Added note that $setmap{prefix,...}
	  needs be used before any commands which require the query to be
	  parsed.

Thu Nov 20 02:44:55 GMT 2003  Olly Betts <olly@survex.com>

	* docs/omegascript.txt: Expanded documentation of $set and $setmap to
	  include values which Omega itself makes use of.

Thu Nov 20 02:43:03 GMT 2003  Olly Betts <olly@survex.com>

	* omega.cc,query.cc: Set default value for $opt{stemmer} to "english"
	  rather than taking "" to mean English.

Tue Oct 21 21:29:18 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Fixed $setmap{} to not add bogus entries.

Tue Oct 21 21:20:31 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Allow the QueryParser prefix map to be set up using
	  $setmap{prefix,...} (e.g. $setmap{prefix,subject,XT,abstract,XA}).

Tue Oct 21 21:13:59 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Only parse probabilistic query once!

Tue Oct 21 20:03:27 BST 2003  Olly Betts <olly@survex.com>

	* omega.cc,omega.h,query.cc,query.h: Reworked so that the
	  probabilistic query isn't parsed until we need some
	  information from it.  This means that we can now use options
	  set by the omegascript template to control the behaviour of the
	  query parser.

Thu Oct 16 21:17:01 BST 2003  Olly Betts <olly@survex.com>

	* omega.cc: Renamed `big_buf' to `query_string' and eliminated `more'
	  flag and use of goto; tidied up order of reading CGI variables; use
	  const refs to value strings in cgi_params map rather than copying
	  the strings out.

Sat Oct 11 20:43:04 BST 2003  Olly Betts <olly@survex.com>

	* omega.cc,omega.h,query.cc: Make rset an object rather than a pointer
	  to an object.

Fri Oct 10 18:06:10 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Removed the unfinished code for caching omegascript
	  command expansions.  Added code to cache $dbsize.  The only other
	  value correctly marked for caching is already being cached!

Thu Oct 02 15:18:19 BST 2003  Olly Betts <olly@survex.com>

	* configure.in: Version 0.7.4.

Thu Oct 02 15:16:41 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: $date doesn't require the match to be run to work, but
	  $topdoc does!

Tue Sep 30 18:32:25 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Cleaner version of T macro.

Tue Sep 30 18:09:30 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Hopefully the final piece in the Sun C++ puzzle.

Tue Sep 30 00:59:50 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Cleaned up a recent fix by using clean generic code which
	  works on Sun's C++ too.

Mon Sep 29 17:12:10 BST 2003  Olly Betts <olly@survex.com>

	* cgiparam.cc: Portability fixes for Sun's C++ compiler.

Mon Sep 29 13:26:22 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Another Sun C++ fix.

Mon Sep 29 11:49:30 BST 2003  Olly Betts <olly@survex.com>

	* query.cc,omega.cc: More fixes for Sun's really rather rubbish
	  C++ compiler.

Mon Sep 29 01:39:56 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Fixes for compiling with Sun's C++ compiler.

Mon Sep 29 01:17:39 BST 2003  Olly Betts <olly@survex.com>

	* omega.cc: Added workaround for compilation problem with Sun's C++.

Fri Aug 08 01:39:51 BST 2003  Olly Betts <olly@survex.com>

	* configure.in: Version 0.7.3.

Sat Aug 02 01:52:38 BST 2003  Olly Betts <olly@survex.com>

	* configure.in,omindex.cc,query.cc: Fixed to compile on mingw
	  where ftime() returns void.

Fri Aug 01 20:59:57 BST 2003  Olly Betts <olly@survex.com>

	* scriptindex.cc: Added #define for sleep() on __WIN32__.

Wed Jul 30 19:05:17 BST 2003  Olly Betts <olly@survex.com>

	* getopt.h: Copied over latest getopt.h from xapian-core.

Sun Jul 27 16:34:19 BST 2003  Olly Betts <olly@survex.com>

	* Makefile.am,getopt.c,getopt.h,getopt1.c: Copied our version of GNU
	  getopt here from xapian-core so we can build omindex on non-glibc
	  platforms (modifications are for better C++ compatibility).

Mon Jul 21 01:16:59 BST 2003  Olly Betts <olly@survex.com>

	* configure.in: Use libtool; OM_PATH_XAPIAN -> XO_LIB_XAPIAN.

Sat Jul 19 19:26:03 BST 2003  Olly Betts <olly@survex.com>

	* omindex.cc: Added missing `#include <errno.h>'.

Sat Jul 19 19:24:50 BST 2003  Olly Betts <olly@survex.com>

	* indextext.cc: Fixed signed character issue.

Thu Jul 17 00:51:42 BST 2003  Olly Betts <olly@survex.com>

	* bootstrap: Removed bootstrap in favour of top-level bootstrap.

Tue Jul 15 16:27:52 BST 2003  Olly Betts <olly@survex.com>

	* omindex.cc: file_to_string() and stdout_to_string() now throw an
	  exception on a read error, avoiding the " "-for-empty-file bodge.

Tue Jul 15 15:18:32 BST 2003  James Aylett  <james@tartarus.org>

	* omindex.cc: fix file_to_string() to return the file on
	  success, and not leak memory on empty files. Fix callers
	  to give up on unreadable files, not vice versa. Fix
	  logging messages to distinguish re-indexed/added.

Fri Jul 11 15:09:55 BST 2003  Olly Betts <olly@survex.com>

	* configure.in: Version 0.7.2.

Fri Jul 11 12:08:57 BST 2003  Olly Betts <olly@survex.com>

	* omega.cc: If the same database is listed more than once, only search
	  the first occurrence.

Fri Jul 11 11:57:24 BST 2003  Olly Betts <olly@survex.com>

	* configure.in,utils.cc: Use snprintf.

Tue Jul 08 17:56:39 BST 2003  Olly Betts <olly@survex.com>

	* configure.in: Version 0.7.1.

Tue Jul 08 17:34:01 BST 2003  Olly Betts <olly@survex.com>

	* omindex.cc: Fixed compilation problem.

Fri Jul 04 22:12:32 BST 2003  Olly Betts <olly@survex.com>

	* bootstrap: add missing ';;' as case pattern delimiter

Thu Jul 03 23:34:50 BST 2003  Olly Betts <olly@survex.com>

	* configure.in: Version 0.7.0.

Thu Jul 03 23:33:05 BST 2003  Olly Betts <olly@survex.com>

	* omindex.cc: Abort parsing of document if it's excluded from
	  indexing; ignore anything outside of the first <body>...</body>,
	  if present.

Tue Jun 24 00:45:28 BST 2003  Olly Betts <olly@survex.com>

	* docs/overview.txt: Added note about hashing of long URL terms and
	  reworked structure a little.

Mon Jun 23 21:11:41 BST 2003  Olly Betts <olly@survex.com>

	* bootstrap: Check for Bison 1.875 which doesn't work with Xapian.

Mon Jun 23 16:52:47 BST 2003  Olly Betts <olly@survex.com>

	* omega.cc,omindex.cc,scriptindex.cc: Xapian::PostListIterator ->
	  Xapian::PostingIterator.

Thu Jun 19 20:02:00 BST 2003  Olly Betts <olly@survex.com>

	* symboltab.h: Convert hardspace to space.

Wed Jun 18 16:32:34 BST 2003  Olly Betts <olly@survex.com>

	* scriptindex.cc: Removed already disabled unique id hashing to docid
	  code.  Xapian doesn't support setting arbitrary docids - if it ever
	  does we can retrieve this code from CVS.

Wed Jun 18 16:28:33 BST 2003  Olly Betts <olly@survex.com>

	* Makefile.am,indextext.cc,indextext.h,omindex.cc,scriptindex.cc:
	  Normalise accents in probabilistic terms.

Tue Jun 17 17:54:32 BST 2003  Olly Betts <olly@survex.com>

	* omindex.cc: Read output from pstotext and pdftotext via pipes rather
	  than temporary files to side-step the whole problem of secure
	  temporary file creation; Use pdfinfo to get the title and keywords
	  from when indexing a PDF; Safe filename escaping tweaked to not
	  escape common safe punctuation.

Tue Jun 17 17:50:00 BST 2003  Olly Betts <olly@survex.com>

	* htmlparse.cc,htmlparse.h: Moved initialisation of named_ents out of
	  header - it's not a sensible candidate for inlining.

Wed Jun 11 02:32:25 BST 2003  Olly Betts <olly@survex.com>

	* date.cc,date.h,omega.cc,omega.h,omindex.cc,query.cc,query.h,
	  scriptindex.cc: Om -> Xapian::, etc.

Fri Jun  6 01:04:12 BST 2003  Richard Boulton <richard@tartarus.org>

	* omindex.cc: Implement an upper limit on the length of URL
	  terms.  Currently, this is set at 240 characters - it can
	  probably be increased slightly, but I'm not sure exactly
	  how long a term can safely be.  If the URL term would be
	  longer than this, its last few bytes are replaced by a
	  hash of the tail of the URL.  This means that (apart from
	  hopefully very rare collisions) urlterms should still be
	  unique ids for documents.

Fri Jun 06 00:14:13 BST 2003  Richard Boulton <richard@tartarus.org>

	* omindex.cc: Clean up processing of HTML documents:
	  - Ignore the contents of <script> and <style> tags in HTML.
	  - Strip initial whitespace in each tag in an HTML document.
	  - Try not to split words in half when truncating title and
	    summary.

Tue Jun 03 11:15:28 BST 2003  Olly Betts <olly@survex.com>

	* templates/query: Create log entry in query.log.

Thu May 29 18:03:54 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Fixed bug in DEFAULT_LOG_ENTRY's Omegascript.

Thu May 29 00:22:28 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Set STEM_LANGUAGE near the start of the file so it's easy
	  for users to change until we get better configurability.

Thu May 29 00:00:28 BST 2003  Olly Betts <olly@survex.com>

	* Makefile.am,date.cc,date.h,query.cc: Split code to build a
	  date range filter into a separate file.

Wed May 28 23:38:02 BST 2003  Olly Betts <olly@survex.com>

	* configfile.cc,configfile.h,omega.cc,omega.conf,query.cc,query.h,
	  docs/omegascript.txt,docs/overview.txt,docs/quickstart.txt:
	  Replaced half-hearted logging support with flexible
	  OmegaScript-based approach with new $log command.  Also added
	  $now to allow the current date/time to be logged.

Tue May 27 17:55:24 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Added missing "#include <assert.h>".

Mon May 26 22:41:26 BST 2003  Olly Betts <olly@survex.com>

	* configure.in: Don't use libtool; Use AC_CONFIG_FILES - it's the new
	  autoconf way!

Mon May 26 12:12:22 BST 2003  Olly Betts <olly@survex.com>

	* omega.spec.in: Removed %changelog - it hasn't been reliably updated
	  and only really makes sense when the packaging is done by a third
	  party anyway.

Mon May 26 12:01:55 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: If the query is empty, don't bother running it through
	  enquire.

Wed Apr 30 01:18:47 BST 2003  Olly Betts <olly@survex.com>

	* docs/cgiparams.txt,docs/omegascript.txt: Minor improvements.

Wed Apr 30 01:14:46 BST 2003  Olly Betts <olly@survex.com>

	* query.cc: Use correct types for docid and value_no in $value.

Wed Apr 23 16:15:07 BST 2003  Sam Liddicott <sam@liddicott.com>

	* templates/xml: add collapse info to xml template.

Wed Apr 23 14:00:37 BST 2003  Olly Betts <olly@survex.com>

	* omega.spec.in: Merged changes from Fabrice Colin.

Thu Apr 10 03:14:51 BST 2003  Olly Betts <olly@survex.com>

	* configure.in: Updated for 0.6.5 release.

Wed Apr 09 13:56:14 BST 2003  Olly Betts <olly@survex.com>

	* omega.cc,query.cc,omega.h,docs/cgiparams.txt: Renamed DATE1, DATE2,
	  and DAYSMINUS to the more meaningful START, END, and SPAN (NB SPAN
	  is days before END, or after START, or before today - whereas
	  SPAN was before *DATE1* or before today).  The old parameters names
	  are supported (with the original semantics) for now.

Wed Apr 09 13:44:28 BST 2003  Olly Betts <olly@survex.com>

	* Makefile.am: Install docs in /usr/share/doc/omega to be FHS
	  compliant.
	* omega.spec.in: Consistently use %{contentdir} instead of /var/lib;
	  removed redundant second setting of %docdir.

Wed Apr 09 01:21:57 BST 2003  Olly Betts <olly@survex.com>

	* Makefile.am: Removed bogus extra "\".

Mon Mar 31 19:42:24 BST 2003  Olly Betts <olly@survex.com>

	* Makefile.am: Install documentation!
	* omega.spec.in: Merged in changes to RPM packaging from Fabrice Colin
	  and reworked further.

Fri Mar 28 17:47:45 GMT 2003  Olly Betts <olly@survex.com>

	* templates/query,templates/query2: Removed bogus setting of defunct
	  xB parameter; correctly propagate multiple B parameters.

Fri Mar 28 17:45:41 GMT 2003  Olly Betts <olly@survex.com>

	* omindex.cc: Report correct version number (was hard-wired to 1.0!)

Tue Mar 25 14:46:10 GMT 2003  Olly Betts <olly@survex.com>

	* query.cc: If xP and P are both empty, classify as SAME_QUERY not
	  NEW_QUERY as there may be a boolean query too.
	* query.cc: Fixed off-by-one error in rounding down topdoc - it was
	  possible to get to an empty page of hits if there were exactly a
	  multiple of HITSPERPAGE matches and the matcher over-estimated the
	  number of matches and Omega displayed page links.

Mon Mar 24 09:40:04 GMT 2003  Sam Liddicott <sam.liddicott@orange.co.uk>

	* templates/query: Added propagation of B boolean filter
	* templates/query2: factored about a bit more, query2 is
	  a more modular version of query which will ultimately
	  lend itself to customisation a bit more to the uninitiated.

Tue Mar 04 01:02:12 GMT 2003  Olly Betts <olly@survex.com>

	* omega.cc: Fixed handling of multiple DB parameters to be as
	  documented.

Fri Feb 28 09:52:03 GMT 2003 Sam Liddicott <sam.liddicott@orange.co.uk>

	* Added $collapsed to omegascript to give the number of hits
	  collapsed into the current hit, eg:

	  $if{$ne{$collapsed,0},$collapsed hidden results
				($value{$cgi{COLLAPSE}})}

	* templates/godmode: removed euro ferret icon reference
	* templates/godmode: added value dumping, for values from 0-255

Thu Feb 27 11:58:13 GMT 2003  Olly Betts <olly@survex.com>

	* Makefile.am,query.cc,docs/omegascript.txt,templates/query:
	  Added $transform{} which does regexp manipulation (currently
	  disabled); Added $uniq{} to eliminate duplicates from a sorted
	  list; Fixed a query with repeated terms to be identified as
	  SAME_QUERY not EXTENDED_QUERY; remove duplicates from terms
	  listed in term frequencies.

Wed Feb 26 17:50:26 GMT 2003  Olly Betts <olly@survex.com>

	* scriptindex.cc: Allow '_' in fieldnames.  Diagnose bad characters
	  in fieldnames better.

Wed Feb 26 15:13:02 GMT 2003  Sam Liddicott <sam.liddicott@orange.co.uk>

	* dbi2omega: Add DBUSER and DBPASSWD env var support so that password
	  protected DB's can easily be used
	* add cgi paramter COLLAPSE to collapse on key values
	* Add $value{key[,docid]} support to omegascript

Wed Feb 26 09:58:01 GMT 2003  Sam Liddicott <sam.liddicott@orange.co.uk>

	* bootstrap: Fix success message when building in non-src dir
	  as configure is written to the src dir.

Mon Jan  6 12:47:55 GMT 2003  James Aylett  <james@tartarus.org>

	* scriptindex.cc: build fix

Tue Dec 24 20:12:23 GMT 2002  Olly Betts <olly@survex.com>

	* configure.in: Version 0.6.4.

Tue Dec 24 20:06:47 GMT 2002  Olly Betts <olly@survex.com>

	* scriptindex.cc: Minor tweak.

Tue Dec 24 19:58:57 GMT 2002  Olly Betts <olly@survex.com>

	* omega.cc,docs/cgiparams.txt: Prefer MINHITS to MIN_HITS and
	  RAWSEARCH to RAW_SEARCH since none of the other CGI parameter
	  names have _ separating words.  Also support old names for now.

Mon Dec 23 03:23:33 GMT 2002  Olly Betts <olly@survex.com>

	* query.cc,docs/omegascript.txt,templates/query: Added $unstem to map
	  a stemmed term to the form(s) used in the query; $queryterms now
	  only includes the first occurence of each stemmed form; $prettyterm
	  uses the unstem map.

Sat Dec 21 17:47:33 GMT 2002  Olly Betts <olly@survex.com>

	* scriptindex.cc,docs/scriptindex.txt: Replaced index=nopos with
	  indexnopos action; index and indexnopos now take an optional
	  prefix argument; index=nopos is handled specially for backwards
	  compatibility.

Sat Dec 21 17:18:02 GMT 2002  Olly Betts <olly@survex.com>

	* scriptindex.cc,docs/scriptindex.txt: Added new scriptindex action
	  date=FORMAT to generate terms for date range searching.

Sat Dec 21 01:51:32 GMT 2002  Olly Betts <olly@survex.com>

	* templates/query: Stop topterms sticking out of green box with
	  gecko based browsers.

Sat Dec 21 01:44:53 GMT 2002  Olly Betts <olly@survex.com>

	* Makefile.am: Distribute docs/scriptindex.txt.
	* docs/omegascript.txt: It's $setrelevant not $set_relevant.

Sat Dec 14 13:54:10 GMT 2002  Olly Betts <olly@survex.com>

	* configure.in: Version 0.6.3; removed -Wno-long-long as we don't use
	  long long here.
	* query.cc: Compilation fixes.
	* templates/query: Don't call $topterms twice!

Sat Dec 14 01:10:48 GMT 2002  Olly Betts <olly@survex.com>

	* query.cc: Updated in line with removal of OmSettings.

Wed Dec 11 00:58:49 GMT 2002  Olly Betts <olly@survex.com>

	* configure.in,query.cc,docs/omegascript.txt,templates/query:
	  Added $time which reports how long the match took - when searching
	  on a remote website, it's hard to gauge how much time is taken by
	  the search, and how much by the web server and browser; renamed
	  and_vec to or_vec which better describes its purpose.

Mon Dec 09 17:11:26 GMT 2002  Olly Betts <olly@survex.com>

	* query.cc,docs/omegascript.txt,templates/query: Added $dbsize
	  to return the number of documents in the database being searched.
	  Use this in the default query template on the "front page" shown
	  when there's no search.

Mon Dec 09 02:55:46 GMT 2002  Olly Betts <olly@survex.com>

	* query.cc,docs/omegascript.txt,templates/query: Added $msizeexact
	  which returns "true" if $msize if exact (or "" if it is estimated).
	  This means that you'll see "... of about N matches" less often -
	  notably it's gone when searching for a single term, which is a
	  pretty common case.

Sun Dec 08 08:42:47 GMT 2002  Olly Betts <olly@survex.com>

	* scriptindex.cc: Replaced icky unportable code which set the filename
	  to "/dev/fd/0" in order to read from stdin.

Sun Dec 08 06:39:30 GMT 2002  Olly Betts <olly@survex.com>

	* query.cc,docs/omegascript.txt: Fixed $hitlist to complain if more
	  than one parameter is passed; $topterms now defaults to 16 terms
	  rather than 20; $topterms now weeds out terms which stem to the
	  same as those in the query, or those already in $topterms.

Sun Dec 08 06:36:04 GMT 2002  Olly Betts <olly@survex.com>

	* templates/query: Make background white - the very light grey just
	  looks dirty; fixed exclusion of TopTerms Javascript when there
	  are not TopTerms; sample now <small>; language and size now
	  appear when the corresponding fields are present; fixed
	  unmatched </small>; fixed missing list of terms matching
	  each document.

Sat Dec 07 21:20:31 GMT 2002  Olly Betts <olly@survex.com>

	* configure.in: Version 0.6.2.

Sat Dec 07 21:04:31 GMT 2002  Olly Betts <olly@survex.com>

	* query.cc: Prefer "while (true)" to "while (1)".

Fri Dec 06 04:41:05 GMT 2002  Olly Betts <olly@survex.com>

	* omindex.cc: Index .php files by default; non-zero return code if
	  an exception is caught.

Fri Dec 06 04:30:17 GMT 2002  Olly Betts <olly@survex.com>

	* htmlparse.cc: Ignore PHP tags and their contents; fixed tag
	  scanning code to never read one character past the end of
	  the document.

Wed Dec 04 18:42:51 GMT 2002  Olly Betts <olly@survex.com>

	* omega.cc,omega.h,omindex.cc,query.cc,scriptindex.cc:
	  Updated in line with OmSettings related changes to the API.

Wed Dec 04 17:13:43 GMT 2002  Olly Betts <olly@survex.com>

	* query.cc: Fixed $dbname to return "default" for the default
	  database, rather than "" - this fixes paging in searches of the
	  default database.
	* templates/query: Removed xDEFAULTOP hidden field which is no longer
	  used.

Wed Dec 04 11:57:13 GMT 2002  Olly Betts <olly@survex.com>

	* templates/query: Removed bogus unmatched '}'.

Thu Nov 28 20:24:08 GMT 2002  Olly Betts <olly@survex.com>

	* omega.cc,query.cc: Updated in line with OmEnquire::get_eset() no
	  longer taking an OmSettings object.

Wed Nov 27 19:02:12 GMT 2002  Olly Betts <olly@survex.com>

	* dbi2omega: Return fields in table order; more efficient;
	  report any error reading a row; if we get a NULL field,
	  don't output it, and suppress perl warning about use of
	  an undefined program.

Wed Nov 27 05:22:04 GMT 2002  Olly Betts <olly@survex.com>

	* configure.in: Set version to 0.6.0.

Wed Nov 27 05:21:00 GMT 2002  Olly Betts <olly@survex.com>

	* configure.in,htmlparse.h,omindex.cc,scriptindex.cc:
	  Use "-Wall -W" rather than "-Wall -Wunused", and fixed the
	  warnings this reveals.

Wed Nov 27 04:20:13 GMT 2002  Olly Betts <olly@survex.com>

	* Makefile.am,dbi2omega: Added perl script to dump any database
	  which perl DBI can access into the dump format expected by
	  scriptindex.

Wed Oct 30 02:02:32 GMT 2002  Olly Betts <olly@survex.com>

	* omega.spec.in: Use bootstrap instead of buildall; don't use "-j4"
	  with make - most people don't all have quad processor boxes!

Wed Oct 30 01:56:31 GMT 2002  Olly Betts <olly@survex.com>

	* buildall: Removed in favour of bootstrap script.

Tue Oct 29 02:01:58 GMT 2002  Olly Betts <olly@survex.com>

	* omindex.cc,scriptindex.cc: Added MAX_PROB_TERM_LENGTH (set to
	  64) to limit size of probabilistic terms.

Sat Oct 12 17:09:55 BST 2002  Olly Betts <olly@survex.com>

	* bootstrap: Copied bootstrap script from xapian-core.

Sat Oct 12 17:05:37 BST 2002  Olly Betts <olly@survex.com>

	* configure.in: Version 0.5.3.

Wed Oct 09 16:55:56 BST 2002  Olly Betts <olly@survex.com>

	* omega.cc,omega.h,query.cc,docs/{cgiparams.txt,omegascript.txt},
	  templates/query: revamped the "reset first page when filter changes"
	  scheme - all filtery things are now serialised and put into the
	  xFILTER CGI parameter, which copes with multiple B values.  Support
	  for the old way (xB, xDATE1, xDATE2, xDAYSMINUS, xDEFAULTOP) is
	  included for now (but only copes with a single B value).  Added (and
	  documented) $filters Omegascript command to implement this.
	* query.cc: fixed handling of case when topdoc is non-zero, but
	  no matches were found.  This was causing topdoc to be set to -6!
	* query.cc: fixed handling of prefixes starting with an X.

Wed Oct 09 15:35:54 BST 2002  Olly Betts <olly@survex.com>

	* .cvsignore: Added scriptindex and omega-*.tar.gz; removed libtool.

Sun Oct 06 18:56:40 BST 2002  Olly Betts <olly@survex.com>

	* configure.in: Version 0.5.2.

Thu Oct 03 16:42:06 BST 2002  Olly Betts <olly@survex.com>

	* query.cc: Added CMD_hit to enumeration.

Wed Oct 02 17:02:25 BST 2002  Olly Betts <olly@survex.com>

	* configure.in: Version 0.5.1.
	* Makefile.am,configure.in: require automake 1.6.3 and autoconf 2.54
	  since xapian-core does anyway, and it neatens configure.in slightly.

Wed Oct 02 16:58:39 BST 2002  Olly Betts <olly@survex.com>

	* query.cc,docs/omegascript.txt: Added $hit which gives the m-set
	  number of the current hit.

Sun Sep 22 15:47:33 BST 2002  Olly Betts <olly@survex.com>

	* configfile.cc: Corrected use of string.data() to string.c_str().

Sun Sep 22 03:53:35 BST 2002  Olly Betts <olly@survex.com>

	* templates/query: Updated xapian url to http://www.xapian.org/

Fri Sep 20 15:36:35 BST 2002  Olly Betts <olly@survex.com>

	* configure.in: Version 0.5.0.

Sun Sep 15 03:07:31 BST 2002  Richard Boulton <richard.boulton@omsee.com>

	* buildall: Update to latest version, to fix bug with VPATH version
	  checking for autoconf.

Thu Sep 12 15:11:16 BST 2002  Olly Betts <olly@survex.com>

	* htmlparse.cc: Add comment about string::replace() invalidating
	  iterators.

Thu Sep 12 13:38:05 BST 2002  Olly Betts <olly@survex.com>

	* omegascript.vim,omegascript.txt,query.cc: cosmetic tweaks.

Thu Sep  5 14:47:54 BST 2002  Richard Boulton <richard@tartarus.org>

	* configure.in: Don't use libtool.  I don't know why I ever thought
	  it was needed.

Thu Sep  5 14:11:51 BST 2002  Richard Boulton <richard@tartarus.org>

	* query.cc: Change $and to return true iff all its arguments are
	  not false, rather than if one or more of the arguments is false.
	* docs/omegascript.txt: Update documentation of $and{}

Fri Aug 23 13:27:02 BST 2002  James Aylett  <tartarus@users.sourceforge.net>

	* docs/quickstart.txt: encourage people to call their first
	  database 'default' since this will work straight off.

Wed Aug 21 17:52:36 BST 2002  Richard Boulton <richard@tartarus.org>

	* query.cc: Add $slice{} command, to slice a list at a set of
	  positions (given by a second list).
	  Also, bugfix: require $hitlist{} to take at least one parameter:
	  it currently segfaults if given none.
	* docs/omegascript.txt: Document $slice{}.
	* extra/omegascript.vim: Update syntax highlighting.

Wed Aug 21 18:03:43 BST 2002  James Aylett  <tartarus@users.sourceforge.net>

	* omindex.cc: tidy up output so it doesn't wrap so much

Wed Aug 21 18:01:38 BST 2002  James Aylett  <tartarus@users.sourceforge.net>

	* htmlparse.cc: fixed bug in entity reference handling

Wed Aug 21 13:21:12 BST 2002  James Aylett  <tartarus@users.sourceforge.net>

	* omindex.cc: Bugfix to metaterm generation when operating on an
	  absolute URL that is also at the root of its web server.

Wed Aug 21 10:48:06 BST 2002  Richard Boulton <richard@tartarus.org>

	* scriptindex.cc: If a field has multiple instances, keep all of
	  them (previously only kept the final occurrence).
	* docs/scriptindex.txt: Mention that multiple instances of fields
	  are permitted.

Tue Aug 20 18:02:45 BST 2002  James Aylett  <tartarus@users.sourceforge.net>

	* docs/quickstart.txt: correct for new(ish) omindex behaviour

Sat Aug 17 13:38:57 BST 2002  Richard Boulton <richard@tartarus.org>

	* extra/omegascript.vim: Quick attempt at a vim syntax highlighting
	  file for omegascript.  Recognises files only if they're in a
	  directory called "templates": perhaps we should adopt a suffix to
	  make recognition easier.
	  Read the file for installation instructions.

Thu Aug 15 11:21:20 BST 2002  Richard Boulton <richard@tartarus.org>

	* scriptindex.cc: Allow updating of databases by a command line
	  switch, and also turn off verbose output (can be turned back
	  on with a switch).
	* docs/scriptindex.txt: Document the "unique" tag.

Thu Aug 15 11:18:21 BST 2002  Richard Boulton <richard@tartarus.org>

	* buildall: Copy buildall from xapian-core - the old one breaks
	  for me (due to odd aclocal paths) but the new one is fine.
	  We should make a common module to hold build stuff to be shared
	  between modules, though.

Mon Aug 12 01:34:42 BST 2002  Richard Boulton <richard@tartarus.org>

	* scriptindex.cc: Bug fix - index without positional information
	  if "nopos" is specified, rather than the other way around.
	  Bug fix - don't completely eradicate newlines in multiline values,
	  until they have a chance to be converted to spaces.
	  Delete documents if no fields other than unique fields are
	  specifed.
	  Add some simple debugging, and write messages to a log file in
	  the database directory.

	* configure.in: Use libtool.

Fri Aug  9 13:57:32 BST 2002  Richard Boulton <richard@tartarus.org>

	* scriptindex.cc: Fix compile errors, by changing string
	  constructors to take begin and end iterators, instead of a begin
	  and a length.

Fri Jul 05 19:33:55 BST 2002  Olly Betts <olly@survex.com>

	* omega.spec.in: Fixed wrt /usr/lib/omega/bin/omega.

Fri Jul 05 19:20:05 BST 2002  Olly Betts <olly@survex.com>

	* Makefile.am, docs/quickstart.txt: Install omega as
	  ${prefix}/lib/omega/bin/omega.

Thu Jul 04 02:11:46 BST 2002  Olly Betts <olly@survex.com>

	* scriptindex.cc, docs/scriptindex.txt: new indexer - indexing
	  behaviour is controlled by a simple but powerful script.

	* Makefile.am: tidied up.

	* configfile.cc, docs/quickstart.txt: database and templates default to
	  being in /var/lib/omega rather than /home/omega.

	* docs/quickstart.txt: describe the new test mode (command line) rather
	  than the old one (stdin).

	* omega.cc, docs/cgiparams.txt: If xP isn't set, honour paging and
	  R-set.  So RAW_SEARCH now only disables snapping TOPDOC to a multiple
	  of HITSPERPAGE.

	* query.cc: "using namespace std;"

Fri Jun 14 00:07:20 BST 2002  Olly Betts <olly@survex.com>

	* $prettyterm{} no longer adds a trailing '.' if the term also exists
	  with an R prefix and stems to itself.

Fri Jun 14 00:02:16 BST 2002  Olly Betts <olly@survex.com>

	* MORELIKE can now take a termname - this allows MORELIKE to be used
	  with a unique id from an external database if it has been indexed
	  as a boolean term.

Thu Jun 13 00:01:11 BST 2002  Olly Betts <olly@survex.com>

	* omega.conf: removed trailing slashes from directory names.

	* query.cc: removed extra slash added to template_dir; improved
	  reporting of errors opening template file.

Wed Jun 12 23:51:11 BST 2002  Olly Betts <olly@survex.com>

	* Added an alternative test mode - you can now pass parameters as
	  command line arguments, which is more convenient for repeating
	  the same test query, and for automated testing, e.g.:

	    omega 'P=information retrieval' DB=papers

	  If the first parameter starts with a "-" and doesn't contain an
	  "=", omega now outputs the version string and stops (to gracefully
	  handle "omega --version" and "omega --help".

Wed Jun 12 23:39:20 BST 2002  Olly Betts <olly@survex.com>

	* omindex.cc: removed OLD_PREFIXES code - shout if you were using it.

Fri May 17 14:09:25 BST 2002  Olly Betts <olly@survex.com>

	* Pass the database to the query parser (not used there at present,
	  but will allow wildcarded searches, etc to be implemented).

Thu May 16 17:57:34 BST 2002  Olly Betts <olly@survex.com>

	* <algo.h> -> <algorithm>.

Thu May 16 15:41:14 BST 2002  Sam Liddicott <sam@ananova.com>

	* Removed extra package again!

	* Moved images to /var/www/icons/omega till we think of something
	  better.  Should be the most harmless solution that still works
	  without requireing too much brains on the part of the installer

Thu May 16 14:53:54 BST 2002  Sam Liddicott <sam@ananova.com>

	* Moved images to a seperate optional package to stop touching
	  user's web tree until we work out what to do.  sysadmin can
	  still install images if he wants and on a redhat box they will
	  end up in the right place. This will no doubt get revisted later,
	  that's fine by me.

Thu May 16 13:31:27 BST 2002  Sam Liddicott <sam@ananova.com>

	* Added loads more missing files like images and templates to the
	  package

	* Also fixed the templates to use the new images dir (if they used
	  images, which they actually don't)

Thu May 16 12:56:55 BST 2002  Sam Liddicott <sam@ananova.com>

	* Fixes to spec file to add various missing files

Wed May 15 12:59:37 BST 2002  Olly Betts <olly@survex.com>

	* omindex now understand acronyms (N.A.T.O. E.T ...).

	* $highlight{} now understands "&" (AT&T M&S ...) and acronyms.

Tue May 14 13:08:41 BST 2002  Olly Betts <olly@survex.com>

	* Index <word>&<word> as a single term (e.g. AT&T, M&S, A&P).

Tue May 14 12:37:49 BST 2002  Olly Betts <olly@survex.com>

	* omindex.cc: cleaned up a little.

Tue May 14 11:24:42 BST 2002  Olly Betts <olly@survex.com>

	* Fixed config.h inclusion; using std::*.

Tue May 14 11:18:37 BST 2002  Olly Betts <olly@survex.com>

	* Updated.

Tue May 14 11:16:03 BST 2002  Olly Betts <olly@survex.com>

	* Added SORT and SORTBANDS.

Mon May 13 12:52:29 BST 2002  Olly Betts <olly@survex.com>

	* Autoconf 2.50.

	* Commented out omindex-config (since it's unfinished) and XML support
	  (since only omindex-config uses it).

Thu May 02 16:06:02 BST 2002  Olly Betts <olly@survex.com>

	* Updated to reflect removal of OmData.

Wed May 01 11:26:59 BST 2002  Olly Betts <olly@survex.com>

	* Changed to use queryparser in libomqueryparser.

Tue Apr 23 15:10:42 BST 2002  Olly Betts <olly@survex.com>

	* Make buildall smart enough to generate aclocal.m4 properly and
	  remove acinclude.m4.  It now also extracts the package name from
	  configure.in so we can use the same buildall everywhere; fixed
	  problem with double use of AM_CXXFLAGS in Makefile.am.

Tue Apr 23 14:27:29 BST 2002  Olly Betts <olly@survex.com>

	* Updated for xapian-config and xapian.m4 changes.

Thu Apr 18 14:37:05 BST 2002  Olly Betts <olly@survex.com>

	* Updated buildall; minor tweaks to configure.in.

Wed Apr 17 12:31:18 BST 2002  Olly Betts <olly@survex.com>

	* Removed references to xapian-config uninst options.

Fri Apr 12 15:48:33 BST 2002  Olly Betts <olly@survex.com>

	* Remove parsequery.cc on "make maintainer-clean".

Fri Apr 12 16:19:19 BST 2002  Olly Betts <olly@survex.com>

	* Require automake 1.5.

Fri Apr 12 12:47:04 BST 2002  Olly Betts <olly@survex.com>

	* Tweaked what gets interpreted as a phrase.

Fri Apr 12 12:44:00 BST 2002  Olly Betts <olly@survex.com>

	* Fixed to use AM_CFLAGS and AM_CXXFLAGS.

Mon Apr 01 23:34:09 BST 2002 Olly Betts <olly@survex.com>

	* Fixed support for decimal numeric entities (e.g. "&#246;")

	* Added support for all iso-8859-1 named entities (e.g. "&ouml;")

Mon Apr 01 15:07:31 BST 2002 Olly Betts <olly@survex.com>

	* Applied patch from "orion orion" to fix problem in HTML parsing.

Mon Mar 25 13:11:14 GMT 2002  Olly Betts <olly@survex.com>

	* More tolerant treatment of random punctuation in query.

Mon Feb  4 14:57:36 GMT 2002  Sam Liddicott  <sam@ananova.com>

	* Added support for repeated fields in document data.
	  $field{fieldname} may now return multiple tab separated values if
	  more than one instance of a field exists in the document data

Tue Jan 15 16:29:39 GMT 2002  Sam Liddicott  <sam@ananova.com>

	* Fixed date_range_filter for the case where DATE1 and DATE2 don't
	  share the same MONTH and YEAR and M## terms for intermediate months
	  need calculating between the years.

Thu Jan 10 15:39:43 GMT 2002  Sam Liddicott  <sam@ananova.com>

	* Added $htmlstrip{} to strip out html tags

Thu Jan 10 14:34:35 GMT 2002  James Aylett  <tartarus@users.sourceforge.net>

	* toptermsjs snippet now included inside the HEAD, so it's
	  actually legal HTML. Snippet now sets the required 'type'
	  attribute as well. (It keeps the technically illegal
	  'language' attribute because I have a sneaking suspicion it
	  won't work otherwise.)

Thu Jan 10 14:30:19 GMT 2002  James Aylett  <tartarus@users.sourceforge.net>

	* $opt with two arguments now acts as a lookup for a $setmap
	  map. This was previously documented in a misleading fashion.
	  The new system is backwards compatible with the old.

Wed Jan 9  Sam Liddicott  <sam@ananova.com>

	* Added RAW_SEARCH as cgi param which when set stops change-search
	  detection being performed and processes rset, topdoc and page-change
	  parameters ( [ ] < > 1 2 etc etc ) anyway

	* Added MIN_HITS cgi param to request many more hits than can
	  fit on the page so we can be confident that the next few
	  consecutive pages will really be needed

	* Added xml template which when combined with RAW_SEARCH=1
	  can be very useful when searching is done from another
	  script

Fri Dec 21 17:56:02 GMT 2001  Olly Betts <olly@survex.com>

	* Namespace fixes to allow use of find and find_if on Redhat's
	  "GCC 2.96".

Fri Dec 21 17:53:59 GMT 2001  Olly Betts <olly@survex.com>

	* Added quick'n'dirty interface to allow experimentation with
	  OmBiasFunctor.

Thu Dec 20 14:46:33 GMT 2001  Olly Betts <olly@survex.com>

	* Document xDB, xDAYSMINUS, xDATE1, xDATE2, xB.

Thu Dec 20 12:55:29 GMT 2001  Olly Betts <olly@survex.com>

	* Use double quotes on parameters to <BODY>.

Mon Dec 17 15:01:43 GMT 2001  Olly Betts <olly@survex.com>

	* Get rid of whitespace between hundreds and tens image in page
	  links.

Fri Dec 14 17:26:48 GMT 2001  Olly Betts <olly@survex.com>

	* Force first page of hits if DB, DEFAULTOP, B, DAYSMINUS, DATE1,
	  or DATE2 changes; also clear relevance judgements if DB changes.

Fri Dec 14 16:21:07 GMT 2001  Olly Betts <olly@survex.com>

	* Removed restriction on minimum page size (was 10) - for a shopping
	  type application with images next to each hit, 5 or fewer per page
	  might be reasonable; even one result per page makes sense for some
	  applications.

Fri Dec 14 15:37:20 GMT 2001  Olly Betts <olly@survex.com>

	* Added $error to make nicer error reporting possible.

Fri Dec 14 14:49:18 GMT 2001  Olly Betts <olly@survex.com>

	* Give more helpful messages for query syntax errors in cases where
	  we can without elaborate YACC hackery.

Thu Dec 13 15:10:24 GMT 2001  Olly Betts <olly@survex.com>

	* For image page buttons, display pages 10-999 by using 2 or 3 images.

Thu Dec 13 15:02:16 GMT 2001  Olly Betts <olly@survex.com>

	* New operators: $div{}, $mod{}, $mul{}, $sub{}, $ge{}, $gt{}, $le{},
	  $lt{}.

Wed Dec 12 16:37:47 GMT 2001  Olly Betts <olly@survex.com>

	* Updated omegascript documentation.

Wed Dec 12 15:43:19 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed TOPDOC clipping.

Wed Dec 12 15:36:20 GMT 2001  Olly Betts <olly@survex.com>

	* templates/query: Fixed typo which caused "..." to appear after
	  page buttons when it wasn't appropriate.

Wed Dec 12 15:11:23 GMT 2001  Olly Betts <olly@survex.com>

	* omega: Added stopword list (still hardcoded at present though).

Wed Dec 12 12:46:57 GMT 2001  Olly Betts <olly@survex.com>

	* omindex: index unstemmed terms with prefix 'R' (mnemonic: Raw).

	* omega: $topterms will now return terms with prefix 'R'.

	* parsequery.yy: fixed handling of DEFAULT_OP; "+first second" and
	  "-first second" now work; stopwording queries working (currently
	  stopword list is hardwired to just "the") - stopwords are ignored
	  when used as normal terms, but not in phrases, or with + and -.

	* templates/query: make use of $prettyterm{}.

Wed Dec 12 11:11:30 GMT 2001  Olly Betts <olly@survex.com>

	* $highlight{} now uses find_if not find_first_of (faster).

	* Fixed detection of new/old/extended query when a term occurs
	  in the query more than once.

	* Added $prettyterm{TERM} to convert a probabilistic term for
	  display to the user.

	* $map would allow more than two arguments, but ignore them.  Fixed
	  to take exactly two.

Fri Dec 07 15:59:21 GMT 2001  Olly Betts <olly@survex.com>

	* Added macros to OmegaScript.

	* template/query: updated to use macros.

	* Removed specialcase to allow no-argument commands to accept an empty
	  argument list (e.g. "$thispage{}" rather than "$thispage").  The only
	  reason this was useful was to allow "$thispage{}s" which can just as
	  well be written using a comment to force the parser do what you want,
	  e.g. "$thispage${}s".

Thu Dec 06 18:59:34 GMT 2001  Olly Betts <olly@survex.com>

	* If a stemmer is set, and all_stem isn't, only stemmer terms starting
	  with a lowercase letter.

Thu Dec 06 18:49:40 GMT 2001  Olly Betts <olly@survex.com>

	* parsequery.yy: changed to use find_if() (faster than find_first_of()).

Thu Dec 06 17:46:37 GMT 2001  Olly Betts <olly@survex.com>

	* Base page links on estimated number of matches, not minimum.

Wed Dec 05 17:07:33 GMT 2001  Olly Betts <olly@survex.com>

	* omindex: minor speed tweaks.

Wed Dec 05 16:52:21 GMT 2001  Olly Betts <olly@survex.com>

	* omindex: further HTML parser speed-ups.

Wed Dec 05 16:31:33 GMT 2001  Olly Betts <olly@survex.com>

	* omindex: sped up HTML parsing.

Wed Dec 05 14:52:53 GMT 2001  Olly Betts <olly@survex.com>

	* omindex: parsing terms from text is now twice as fast.

Thu Nov 29 16:53:45 GMT 2001  Olly Betts <olly@survex.com>

	* NEAR phrases (e.g. "a NEAR b NEAR c") now work; removed "{a b c}"
	  syntax for NEAR phrases.

Thu Nov 29 15:25:54 GMT 2001  Olly Betts <olly@survex.com>

	* $highlight{} now allows you to specify the tags to use for the
	  highlighting.

Thu Nov 29 15:24:53 GMT 2001  Olly Betts <olly@survex.com>

	* topdoc is unsigned so subtracting and then checking if it's < 0
	  doesn't work...

Wed Nov 28 15:45:39 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed clipping of hit page in case when there are a multiple of
	  HITSPERPAGE matches.

Wed Nov 28 14:03:48 GMT 2001  Olly Betts <olly@survex.com>

	* Added $hostname{URL}; $version output now says "Xapian - omega
	  <version>".

Wed Nov 28 13:04:46 GMT 2001  Olly Betts <olly@survex.com>

	* docs/cgiparams.txt: Minor corrections and updates.

Wed Nov 28 13:03:40 GMT 2001  Olly Betts <olly@survex.com>

	* If we're asked for a page of hits beyond the end of the matches, clip
	  to the last page of matches rather than the first.

Wed Nov 28 13:02:31 GMT 2001  Olly Betts <olly@survex.com>

	* For an EXTENDED_QUERY, force the first page of hits.

Wed Nov 28 12:56:56 2001  James Aylett  <tartarus@users.sourceforge.net>

	* Lower case terms when constructing the query (otherwise why
	  do we store them in the database that way? :-)

Wed Nov 28 12:36:49 GMT 2001  Olly Betts <olly@survex.com>

	* Fettled default query template.

Wed Nov 28 12:33:52 GMT 2001  Olly Betts <olly@survex.com>

	* Request one more match than the last we want to display so we can
	  tell if the next page of hits is empty or not - otherwise we risk
	  offering a "next page" link when there are no more hits.

Mon Nov 26 16:28:00 2001  James Aylett  <tartarus@users.sourceforge.net>

	* --no-recurse / -l option added; useful if your sites are
	  nested in their disc storage (particularly things like
	  http://example.com/ being a distinct site, with
	  http://example.com/product being within it)

	* --mime-type now really works (it was --mime-map in the code)

	* documentation updated further

Mon Nov 26 14:39:00 2001  James Aylett  <tartarus@users.sourceforge.net>

	* options parsing fixed so minimised/unrecognised long options
	  doesn't segfault

Mon Nov 26 14:00:13 2001  James Aylett  <tartarus@users.sourceforge.net>

	* omindex can now index part of a site (previously 'subsite')
	  by having an index base within the site's disc storage

Mon Nov 26 13:57:10 2001  James Aylett <tartarus@users.sourceforge.net>

	* Documentation updated for recent changes

Thu Nov 22 13:24:45 GMT 2001  Olly Betts <olly@survex.com>

	* Use $nice{} in query template, but don't use $freqs.  Use numbers as
	  page image button tooltips on Netscape 4.

Thu Nov 22 13:02:17 GMT 2001  Olly Betts <olly@survex.com>

	* Herded escaped CGI parameter mangling code back into cgiparam.cc;
	  added special handling for  numeric image button names.

Thu Nov 22 12:55:00 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed $nice to put the comma (or dot) in the right place.

Tue Nov 20 17:30:19 GMT 2001  Olly Betts <olly@survex.com>

	* $lastpage now returns 0 when there are no matches (previously
	  gave a very large answer).

Tue Nov 20 12:30:47 GMT 2001  Olly Betts <olly@survex.com>

	* $terms now only returns terms which were in the parsed query
	  (boolean filter terms are excluded).

Tue Nov 20 12:07:54 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed bug in date range filtering (got it wrong when start and end
	  date were in the same month).

	* DAYSMINUS now counts back from DATE1 (if specified) rather than
	  always counting back from the present.

Mon Nov 19 17:13:24 GMT 2001  Olly Betts <olly@survex.com>

	* Added date-range filtering (not fully tested yet).

Mon Nov 19 15:21:31 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed (c) message displayed by -v (BrightStation "PLC" not "Inc.",
	  first (c) 1999).

Fri Nov 16 11:49:20 GMT 2001  Olly Betts <olly@survex.com>

	* New OmegaScript commands: $allterms{<docid>}, $freq{<term>},
	  $nice{<number>}, $set_relevant{<docid>}.

	* $map{} now returns a list (shouldn't affect most users - if
	  the extra tabs are a problem, change `$map{...}' to
	  `$list{$map{...},}' ).

	* Template `query' now preserves value of THRESHOLD.

	* Template `godmode' fixed to actually work.

Wed Nov 14 15:04:13 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed to compile with GCC3.0

Wed Nov 14 14:54:53 GMT 2001  Olly Betts <olly@survex.com>

	* Updated for changes to OmQuery

Tue Nov 06 13:10:15 GMT 2001  Olly Betts <olly@survex.com>

	* Updated .cvsignore.

Tue Nov 06 13:02:04 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed lookup of CGI parameter THRESHOLD.

Tue Nov  6 12:38:37 GMT 2001  Richard Boulton <richard@tartarus.org>

	* Moved configure.ac to configure.in: depending on autoconf 2.13 is
	  not needed yet.

Tue Nov 06 12:23:55 GMT 2001  Olly Betts <olly@survex.com>

	* Added support for percentage threshold cutoff (CGI var THRESHOLD);
	  Code for calculating better percentages has been pushed into Xapian
	  so removed it from here.

Mon Nov  5 12:42:26 GMT 2001  Richard Boulton <richard@tartarus.org>

	* Omega moved to new home, from om-examples/omega.
	  Standalone build system added.



