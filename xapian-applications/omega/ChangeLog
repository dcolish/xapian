Fri Apr 12 15:48:33 BST 2002  Olly Betts <olly@survex.com>

	* Remove parsequery.cc on "make maintainer-clean".

Fri Apr 12 16:19:19 BST 2002  Olly Betts <olly@survex.com>

	* Require automake 1.5.

Fri Apr 12 12:47:04 BST 2002  Olly Betts <olly@survex.com>

	* Tweaked what gets interpreted as a phrase.

Fri Apr 12 12:44:00 BST 2002  Olly Betts <olly@survex.com>

	* Fixed to use AM_CFLAGS and AM_CXXFLAGS.

Mon Apr 01 23:34:09 BST 2002 Olly Betts <olly@survex.com>

	* Fixed support for decimal numeric entities (e.g. "&#246;")

	* Added support for all iso-8859-1 named entities (e.g. "&ouml;")

Mon Apr 01 15:07:31 BST 2002 Olly Betts <olly@survex.com>

	* Applied patch from "orion orion" to fix problem in HTML parsing.

Mon Mar 25 13:11:14 GMT 2002  Olly Betts <olly@survex.com>

	* More tolerant treatment of random punctuation in query.

Mon Feb  4 14:57:36 GMT 2002  Sam Liddicott  <sam@ananova.com>

	* Added support for repeated fields in document data.
	  $field{fieldname} may now return multiple tab separated values if
	  more than one instance of a field exists in the document data

Tue Jan 15 16:29:39 GMT 2002  Sam Liddicott  <sam@ananova.com>

	* Fixed date_range_filter for the case where DATE1 and DATE2 don't
	  share the same MONTH and YEAR and M## terms for intermediate months 
	  need calculating between the years.

Thu Jan 10 15:39:43 GMT 2002  Sam Liddicott  <sam@ananova.com>

	* Added $htmlstrip{} to strip out html tags

Thu Jan 10 14:34:35 GMT 2002  James Aylett  <tartarus@users.sourceforge.net>

	* toptermsjs snippet now included inside the HEAD, so it's
	  actually legal HTML. Snippet now sets the required 'type'
	  attribute as well. (It keeps the technically illegal
	  'language' attribute because I have a sneaking suspicion it
	  won't work otherwise.)

Thu Jan 10 14:30:19 GMT 2002  James Aylett  <tartarus@users.sourceforge.net>

	* $opt with two arguments now acts as a lookup for a $setmap
	  map. This was previously documented in a misleading fashion.
	  The new system is backwards compatible with the old.

Wed Jan 9  Sam Liddicott  <sam@ananova.com>

	* Added RAW_SEARCH as cgi param which when set stops change-search
	  detection being performed and processes rset, topdoc and page-change
          parameters ( [ ] < > 1 2 etc etc ) anyway

	* Added MIN_HITS cgi param to request many more hits than can
	  fit on the page so we can be confident that the next few
	  consecutive pages will really be needed

	* Added xml template which when combined with RAW_SEARCH=1
	  can be very useful when searching is done from another
	  script

Fri Dec 21 17:56:02 GMT 2001  Olly Betts <olly@survex.com>

	* Namespace fixes to allow use of find and find_if on Redhat's
	  "GCC 2.96".

Fri Dec 21 17:53:59 GMT 2001  Olly Betts <olly@survex.com>

	* Added quick'n'dirty interface to allow experimentation with
	  OmBiasFunctor.

Thu Dec 20 14:46:33 GMT 2001  Olly Betts <olly@survex.com>

	* Document xDB, xDAYSMINUS, xDATE1, xDATE2, xB.

Thu Dec 20 12:55:29 GMT 2001  Olly Betts <olly@survex.com>

	* Use double quotes on parameters to <BODY>.

Mon Dec 17 15:01:43 GMT 2001  Olly Betts <olly@survex.com>

	* Get rid of whitespace between hundreds and tens image in page
	  links.

Fri Dec 14 17:26:48 GMT 2001  Olly Betts <olly@survex.com>

	* Force first page of hits if DB, DEFAULTOP, B, DAYSMINUS, DATE1,
	  or DATE2 changes; also clear relevance judgements if DB changes.

Fri Dec 14 16:21:07 GMT 2001  Olly Betts <olly@survex.com>

	* Removed restriction on minimum page size (was 10) - for a shopping
	  type application with images next to each hit, 5 or fewer per page
	  might be reasonable; even one result per page makes sense for some
	  applications.

Fri Dec 14 15:37:20 GMT 2001  Olly Betts <olly@survex.com>

	* Added $error to make nicer error reporting possible.

Fri Dec 14 14:49:18 GMT 2001  Olly Betts <olly@survex.com>

	* Give more helpful messages for query syntax errors in cases where
	  we can without elaborate YACC hackery.

Thu Dec 13 15:10:24 GMT 2001  Olly Betts <olly@survex.com>

	* For image page buttons, display pages 10-999 by using 2 or 3 images.

Thu Dec 13 15:02:16 GMT 2001  Olly Betts <olly@survex.com>

	* New operators: $div{}, $mod{}, $mul{}, $sub{}, $ge{}, $gt{}, $le{},
	  $lt{}.

Wed Dec 12 16:37:47 GMT 2001  Olly Betts <olly@survex.com>

	* Updated omegascript documentation.

Wed Dec 12 15:43:19 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed TOPDOC clipping.

Wed Dec 12 15:36:20 GMT 2001  Olly Betts <olly@survex.com>

	* templates/query: Fixed typo which caused "..." to appear after
	  page buttons when it wasn't appropriate.

Wed Dec 12 15:11:23 GMT 2001  Olly Betts <olly@survex.com>

	* omega: Added stopword list (still hardcoded at present though).

Wed Dec 12 12:46:57 GMT 2001  Olly Betts <olly@survex.com>

	* omindex: index unstemmed terms with prefix 'R' (mnemonic: Raw).

	* omega: $topterms will now return terms with prefix 'R'.

	* parsequery.yy: fixed handling of DEFAULT_OP; "+first second" and
	  "-first second" now work; stopwording queries working (currently
	  stopword list is hardwired to just "the") - stopwords are ignored
	  when used as normal terms, but not in phrases, or with + and -.

	* templates/query: make use of $prettyterm{}.

Wed Dec 12 11:11:30 GMT 2001  Olly Betts <olly@survex.com>

	* $highlight{} now uses find_if not find_first_of (faster).

	* Fixed detection of new/old/extended query when a term occurs
	  in the query more than once.

	* Added $prettyterm{TERM} to convert a probabilistic term for
	  display to the user.

	* $map would allow more than two arguments, but ignore them.  Fixed
	  to take exactly two.

Fri Dec 07 15:59:21 GMT 2001  Olly Betts <olly@survex.com>

	* Added macros to OmegaScript.

	* template/query: updated to use macros.

	* Removed specialcase to allow no-argument commands to accept an empty
	  argument list (e.g. "$thispage{}" rather than "$thispage").  The only
	  reason this was useful was to allow "$thispage{}s" which can just as
	  well be written using a comment to force the parser do what you want,
	  e.g. "$thispage${}s".

Thu Dec 06 18:59:34 GMT 2001  Olly Betts <olly@survex.com>

	* If a stemmer is set, and all_stem isn't, only stemmer terms starting
	  with a lowercase letter.

Thu Dec 06 18:49:40 GMT 2001  Olly Betts <olly@survex.com>

	* parsequery.yy: changed to use find_if() (faster than find_first_of()).

Thu Dec 06 17:46:37 GMT 2001  Olly Betts <olly@survex.com>

	* Base page links on estimated number of matches, not minimum.

Wed Dec 05 17:07:33 GMT 2001  Olly Betts <olly@survex.com>

	* omindex: minor speed tweaks.

Wed Dec 05 16:52:21 GMT 2001  Olly Betts <olly@survex.com>

	* omindex: further HTML parser speed-ups.

Wed Dec 05 16:31:33 GMT 2001  Olly Betts <olly@survex.com>

	* omindex: sped up HTML parsing.

Wed Dec 05 14:52:53 GMT 2001  Olly Betts <olly@survex.com>

	* omindex: parsing terms from text is now twice as fast.

Thu Nov 29 16:53:45 GMT 2001  Olly Betts <olly@survex.com>

	* NEAR phrases (e.g. "a NEAR b NEAR c") now work; removed "{a b c}"
	  syntax for NEAR phrases.

Thu Nov 29 15:25:54 GMT 2001  Olly Betts <olly@survex.com>

	* $highlight{} now allows you to specify the tags to use for the
	  highlighting.

Thu Nov 29 15:24:53 GMT 2001  Olly Betts <olly@survex.com>

	* topdoc is unsigned so subtracting and then checking if it's < 0
	  doesn't work...

Wed Nov 28 15:45:39 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed clipping of hit page in case when there are a multiple of
	  HITSPERPAGE matches. 

Wed Nov 28 14:03:48 GMT 2001  Olly Betts <olly@survex.com>

	* Added $hostname{URL}; $version output now says "Xapian - omega
	  <version>".

Wed Nov 28 13:04:46 GMT 2001  Olly Betts <olly@survex.com>

	* docs/cgiparams.txt: Minor corrections and updates.

Wed Nov 28 13:03:40 GMT 2001  Olly Betts <olly@survex.com>

	* If we're asked for a page of hits beyond the end of the matches, clip
	  to the last page of matches rather than the first.

Wed Nov 28 13:02:31 GMT 2001  Olly Betts <olly@survex.com>

	* For an EXTENDED_QUERY, force the first page of hits.

Wed Nov 28 12:56:56 2001  James Aylett  <tartarus@users.sourceforge.net>

	* Lower case terms when constructing the query (otherwise why
	  do we store them in the database that way? :-)

Wed Nov 28 12:36:49 GMT 2001  Olly Betts <olly@survex.com>

	* Fettled default query template.

Wed Nov 28 12:33:52 GMT 2001  Olly Betts <olly@survex.com>

	* Request one more match than the last we want to display so we can
	  tell if the next page of hits is empty or not - otherwise we risk
	  offering a "next page" link when there are no more hits.

Mon Nov 26 16:28:00 2001  James Aylett  <tartarus@users.sourceforge.net>

	* --no-recurse / -l option added; useful if your sites are
	  nested in their disc storage (particularly things like
	  http://example.com/ being a distinct site, with
	  http://example.com/product being within it)

	* --mime-type now really works (it was --mime-map in the code)

	* documentation updated further

Mon Nov 26 14:39:00 2001  James Aylett  <tartarus@users.sourceforge.net>

	* options parsing fixed so minimised/unrecognised long options
	  doesn't segfault

Mon Nov 26 14:00:13 2001  James Aylett  <tartarus@users.sourceforge.net>

	* omindex can now index part of a site (previously 'subsite')
	  by having an index base within the site's disc storage

Mon Nov 26 13:57:10 2001  James Aylett <tartarus@users.sourceforge.net>

	* Documentation updated for recent changes

Thu Nov 22 13:24:45 GMT 2001  Olly Betts <olly@survex.com>

	* Use $nice{} in query template, but don't use $freqs.  Use numbers as
	  page image button tooltips on Netscape 4.

Thu Nov 22 13:02:17 GMT 2001  Olly Betts <olly@survex.com>

	* Herded escaped CGI parameter mangling code back into cgiparam.cc;
	  added special handling for  numeric image button names.

Thu Nov 22 12:55:00 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed $nice to put the comma (or dot) in the right place.

Tue Nov 20 17:30:19 GMT 2001  Olly Betts <olly@survex.com>

	* $lastpage now returns 0 when there are no matches (previously
	  gave a very large answer).

Tue Nov 20 12:30:47 GMT 2001  Olly Betts <olly@survex.com>

	* $terms now only returns terms which were in the parsed query
	  (boolean filter terms are excluded).

Tue Nov 20 12:07:54 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed bug in date range filtering (got it wrong when start and end
	  date were in the same month).

	* DAYSMINUS now counts back from DATE1 (if specified) rather than
	  always counting back from the present.

Mon Nov 19 17:13:24 GMT 2001  Olly Betts <olly@survex.com>

	* Added date-range filtering (not fully tested yet).

Mon Nov 19 15:21:31 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed (c) message displayed by -v (BrightStation "PLC" not "Inc.",
	  first (c) 1999).

Fri Nov 16 11:49:20 GMT 2001  Olly Betts <olly@survex.com>

	* New OmegaScript commands: $allterms{<docid>}, $freq{<term>},
	  $nice{<number>}, $set_relevant{<docid>}.

	* $map{} now returns a list (shouldn't affect most users - if
	  the extra tabs are a problem, change `$map{...}' to
	  `$list{$map{...},}' ).

	* Template `query' now preserves value of THRESHOLD.

	* Template `godmode' fixed to actually work.

Wed Nov 14 15:04:13 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed to compile with GCC3.0

Wed Nov 14 14:54:53 GMT 2001  Olly Betts <olly@survex.com>

	* Updated for changes to OmQuery

Tue Nov 06 13:10:15 GMT 2001  Olly Betts <olly@survex.com>

	* Updated .cvsignore.

Tue Nov 06 13:02:04 GMT 2001  Olly Betts <olly@survex.com>

	* Fixed lookup of CGI parameter THRESHOLD.

Tue Nov  6 12:38:37 GMT 2001  Richard Boulton <richard@tartarus.org>

	* Moved configure.ac to configure.in: depending on autoconf 2.13 is
	  not needed yet.

Tue Nov 06 12:23:55 GMT 2001  Olly Betts <olly@survex.com>

	* Added support for percentage threshold cutoff (CGI var THRESHOLD);
	  Code for calculating better percentages has been pushed into Xapian
	  so removed it from here.

Mon Nov  5 12:42:26 GMT 2001  Richard Boulton <richard@tartarus.org>

	* Omega moved to new home, from om-examples/omega.
	  Standalone build system added.

