# RedHat-style .spec file for Xapian
# Generated by "configure"

Name: @PACKAGE@
Version: @VERSION@
Release: 2
License: GPL
Group: Applications/Internet
URL: http://www.xapian.org/
Summary: @PACKAGE@ is a CGI application which uses the Xapian search library to search a collection of documents

Source0: http://www.xapian.org/download/distributions/%{name}-%{version}.tar.gz

# Where are we going to build the install set to?
BuildRoot: %{_tmppath}/%{name}-root

%description
@PACKAGE@ is a CGI application which uses the Xapian search library to
search a collection of documents

%prep
%setup -q -n %{name}-%{version}

%build

test -f ./configure || ./buildall
./configure
make -j4

%install
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT

make install-strip prefix=$RPM_BUILD_ROOT%{_prefix}
mkdir -p $RPM_BUILD_ROOT%{_prefix}/share/docs/%{name}
cp README NEWS TODO docs/* $RPM_BUILD_ROOT%{_prefix}/share/docs/%{name}/
mkdir -p $RPM_BUILD_ROOT/etc
cp omega.conf $RPM_BUILD_ROOT/etc

%clean
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
/usr/bin/*
%docdir /usr/share/doc/%{name}
/usr/share/docs/%{name}
%config /etc/omega.conf

%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig

%changelog
* Wed May 14 2002  Sam Liddicott <sam@ananova.com>
  First cut based on xapian spec file
