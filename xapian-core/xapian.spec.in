# RedHat-style .spec file for Xapian
# RPM Informational headers
# @configure_input@
Summary: Xapian is a library that enables developers to use advanced information retrieval techniques in their own projects
Name: xapian-core
Version: @VERSION@
Release: 1
License: GPL
Group: Development/Libraries
URL: http://www.xapian.org/
BuildPrereq: graphviz doxygen tetex-latex tetex-dvips

Source0: http://www.xapian.org/download/distributions/xapian-core-%{version}.tar.gz

# Where are we going to build the install set to?
BuildRoot: %{_tmppath}/%{name}-root

# FIXME improve description
%description
Xapian is a library that enables developers to use advanced probabilistic
information retrieval techniques in their own projects.

%package devel
Group: Development/Libraries
Summary: Files needed for building packages which use Xapian
Requires: xapian-core

%description devel
The xapian-devel package contains the files needed for building packages which
use the Xapian library.  You don't need this package if you only want to use
pre-built packages which make use of Xapian.

%prep
%setup -q -n xapian-core-%{version}

# Apply the patches to the main source
#%patch0 -p1

%build

test -f ./configure || ./bootstap
./configure --prefix=/usr
make
echo $RPM_BUILD_ROOT

%install
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT

make install-strip prefix=$RPM_BUILD_ROOT%{_prefix}
# move the docs to the right place
mkdir -p $RPM_BUILD_ROOT%{_prefix}/share/doc
mv $RPM_BUILD_ROOT%{_prefix}/share/xapian $RPM_BUILD_ROOT%{_prefix}/share/doc/

%clean
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
/usr/lib/*

%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig

%files devel
%defattr(-,root,root)
%docdir /usr/share/doc/xapian
/usr/share/doc/xapian
%{_includedir}/om/
/usr/share/aclocal/*
/usr/bin/xapian-config

%changelog
* Wed May 14 2002  Sam Liddicott <sam@ananova.com>
  Based on a Redhat php .spec file
