<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>Xapian: Remote Backend Protocol</TITLE>
</HEAD>
<BODY BGCOLOR="white" TEXT="black">

<H1>Remote Backend Protocol</H1>

This description should now be up to date for protocol version 16, but hasn't
been thoroughly checked.

<p>
This is a brief description of the wire protocol used by the remote
backend:

<pre>
Message 1:
Direction: ProgServer-&gt;ProgClient
Format: OM &lt;protocol version&gt; &lt;document count&gt; &lt;average length&gt;
Description: Identifies protocol version and sends basic statistics.
When: At connection setting up time.

Message 2:
Direction: ProgClient-&gt;ProgServer
Format: Q&lt;query string&gt;\n&lt;options&gt;\n&lt;weighting&gt;\n&lt;R-set&gt;
Description: The query, options, weighting formula and parameters, and R-set.
When: At prepare_match() time

Message 3:
Direction: ProgServer-&gt;ProgClient
Format: L&lt;serialised local stats&gt;
Description: The local database statistics

Message 4:
Direction: ProgClient-&gt;ProgServer
Format: G&lt;serialised global stats&gt;\nM&lt;first item&gt; &lt;max items&gt;
Description: The global statistics for all databases are sent,
	     and the MSet requested.
When: At get_mset() time.

Message 5:
Direction: ProgServer-&gt;ProgClient
Format: O&lt;first&gt; &lt;lower bound&gt; &lt;estimated&gt; &lt;upper bound&gt; &lt;max_possible&gt; &lt;max_attained&gt;\
        &lt;#items&gt; [&lt;weight&gt; &lt;doc id&gt; &lt;collapse key value&gt;]...\
        [&lt;term&gt; &lt;frequency&gt; &lt;weight&gt;]... 
Description: The returned MSet.
</pre>
<!-- FOOTER $Author$ $Date$ $Id$ -->
</BODY>
</HTML>
