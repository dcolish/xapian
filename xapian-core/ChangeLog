Thu May 25 12:07:29 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Add a simple test of the max_or_terms feature to apitest.

Thu May 25 12:06:06 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Add max_or_terms member to localmatch, to store option in.

Wed May 24 17:55:52 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Separated collection of statistics and building of the query
	  tree in LocalMatch.  Added method which will be used to select
	  terms for use in the query when max_or_terms is in effect.

Wed May 24 16:37:16 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Implemented get_doccount and get_avlength in NetworkDatabase.
	  Only 4 tests left failing with the net backend...

Wed May 24 12:50:19 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Exceptions are now propagated over the net link.

	* OmError's get_msg() method is now const.

Tue May 23 17:51:27 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Add a LocalMatch::gather_query_statistics() method, to be called
	  before building the query tree, so that the tree can be pruned
	  based on the termweights of some of the probabalistic terms.

Tue May 23 17:34:30 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Fixed max_attain for net backend.

Tue May 23 16:57:44 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Made RSets work with network db.

Tue May 23 16:36:25 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Fix bug due to uninitialised members in OmDocumentTerm.

Tue May 23 14:51:10 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Fixed boolean queries with the net backend.

Tue May 23 14:06:40 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* apitest sleepy tests now remove the generated indexes before
	  running.

Tue May 23 12:18:31 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* SocketServer now correctly handles more than one query.

Tue May 23 12:00:38 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added a NetworkTermList object.  Currently a fair way from working
	  correctly, but it does compile:  uses lots of unimplemented
	  methods.

	* General work on termlists (documentation comments, code tidying),
	  and expand.

Mon May 22 18:36:43 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* ProgClient and omprogsrv can both now take more than one database
	  argument.

	* Net stuff now doesn't bomb out from SIGPIPE.

	* Miscellaneous bug fixes

	* apitest has code to run tests on the net backend.

Mon May 22 15:31:12 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Moved inline functions from testutils.h to testutils.cc

	* Separated out the non-backend-using tests from apitest to
	  avoid running them more than once when more than one backend
	  is compiled in.

Mon May 22 14:53:25 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* FAIL_TEST macro in testsuite.h now takes notice of the verbose
	  flag.

	* In theory, the sleepy tests are only run if the sleepy backend
	  is compiled in (as well as the #if 0)

Mon May 22 13:44:21 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Slightly improved summary reporting in apitest.

Mon May 22 13:28:26 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Fixed a memory leak in SleepyDatabase (when database doesn't
	  exist).

Mon May 22 13:08:37 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* apitest can now run all the tests against sleepycat as well as
	  inmemory tables.  The actual call is currently protected by
	  #if 0.

Fri May 19 18:35:33 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Abstracted all database access in apitest to one function, so that
	  it can easily be made to run with different backends.

Fri May 19 16:30:53 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Changed raw uses of "cout" and "cerr" in net code to use
	  DebugMsg instead.

Fri May 19 15:58:11 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Add test to nettest to try to do an expand.  Currently fails, since
	  this isn't implemented.

Fri May 19 11:48:15 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* MultiMatch::get_max_weight() now returns the maximum of the
	  max_weights from the submatchers, rather than just the first one.
	  This ensures that the correct value is returned in the case of
	  a multimatch with relevant documents in some of the submatchers.

	* Fix some test cases so that they test the correct things.

Fri May 19 11:43:09 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Further test to check that rset weights are getting distributed
	  correctly in multidatabase cases.

Thu May 18 18:11:16 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* MultiMatch now splits up RSets appropriately for each of its sub
	  databases, so multimatch stuff works correctly with RSets.

Thu May 18 17:14:52 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Work on testsuite.  Many useful macros produced, tests simplified,
	  and tests can now report failure by throwing an exception instead
	  of by returning "false".

Thu May 18 15:08:09 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added test for Rsets in a multimatch.  (Currently fails)

Thu May 18 12:11:50 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added support for using RSets with the network matches

	* Better timeouts when remote end unresponsive

Thu May 18 11:20:58 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added test that setting an rset has appropriate effect on match
	  results (relevant document comes to top).

Thu May 18 11:15:36 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added new exception OmInternalError for really weird problems.

Wed May 17 18:12:53 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added simple test for RSet usage.

Wed May 17 17:52:22 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Fix memory leak in rset.cc

Wed May 17 17:26:41 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* BM25Weight and TradWeight now ask their statssource for information
	  about the RSet, rather than asking the rset directly.  As a result,
	  they no longer have or need an "RSet * rset" member.

Wed May 17 17:09:35 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* RSet now has a give_stats_to_statssource() method, used by
	  localmatch to pass the statistics to the stats system for
	  sharing and merging.

Wed May 17 15:56:52 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Pass relevance sets around as OmRSets, only creating an RSet within
	  LocalMatch.  RSet now has a method to tell it to calculate the
	  statistics, which is called after the query has been constructed,
	  paving the way for integration with StatsSources.

Wed May 17 15:56:36 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Ensure that the a refcount pointer is not made from a standard pointer
	  more than once.

Tue May 16 16:29:25 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* apitest now performs its own indexing for tests.  Next step is to
	  stop nettest using the internal indexing in InMemoryDatabase and
	  then stop InMemoryDatabase accepting path parameters.

Tue May 16 15:07:46 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added add_database() method to OmDatabaseGroup which takes an
	  OmDatabase object, instead of parameters for opening a database.

Tue May 16 12:48:40 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Assignment operators for OmDatabase and OmWritableDatabase are
	  now safe: assignment of a OmDatabase to an OmWritableDatabase
	  will either fail to compile or throw an exception, all other
	  possibilities will work.

Tue May 16 12:22:33 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Now pass match options over the net link.  (Untested so far)

Tue May 16 12:06:23 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Created an OmDatabase object.  This represents a database,
	  and is a base class for OmWritableDatabase, which is a database
	  which can be written to.  Implemented, except for assignment
	  operators which may operate incorrectly.

Mon May 15 13:34:39 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Moved OmDatabaseGroup into a separate header file.

Mon May 15 12:23:16 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Bugfix: MultiDatabases term existence cache no longer grows
	  arbitrarily.  (But not an efficient implementation)

	* SingleMatch now inherits from OmRefCntBase, so we can use
	  reference counted pointers to it.
	
	* More work tidying up structure of MultiDatabase and MultiMatch.

Mon May 15 11:34:16 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Now use SO_REUSEADDR in TCP server

	* Added the first tcp test to nettest.

Fri May 12 19:18:43 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Bug fixes to the TCP server

Fri May 12 18:48:14 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Make OmDatabaseGroup now stores opened databases, rather than
	  their parameters.

	* OmDatabaseGroup::InternalInterface now uses a method in
	  OmDatabaseGroup::Internal to get_multidatabase.  Same MultiDatabase
	  is returned after each call, unless a database has been added.
	  Pthread locking is also sorted out.

Fri May 12 18:29:01 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* New class OmDatabaseGroup::InternalInterface, used to extend
	  the OmDatabaseGroup interface for internal use.
	
	* ProgServer's implementation mostly moved into new SocketServer.

	* New class TcpServer deriving from SocketServer

Fri May 12 16:10:44 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Remove set_root() method and "root" member from IRDatabase, and
	  subclasses.  This is now catered for by stats and weighting
	  objects.

Thu May 11 18:51:22 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Add constructor to MultiDatabase, taking a vector of IRDatabase
	  pointers.

	* Store subdatabases in MultiDatabase in a vector of reference
	  counted pointers, rather than as pointers.  This has no actual
	  effect yet, but will do when we extend the use of these pointers
	  to the rest of the code (currently we pass them out as standard
	  pointers)

Thu May 11 17:05:11 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Add rule so that internaltest will compile with special CFLAGS,
	  to ignore access control.

Thu May 11 16:40:30 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Make OmRefCntBase::ref_count mutable, and ref_increment() and
	  ref_decrement() into const methods, so that we can have reference
	  counted access to const objects.

	* Make DATerm and DBTerm objects reference counted, and store
	  reference count pointers to them in the term cache.  This results
	  in removing the possibility of open_post_list() having the Term
	  object it is dealing with deleted from underneath it due to
	  concurrent access.

Thu May 11 16:38:05 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Made the internals of OmRefCntBase private, and moved
	  increment() and decrement() from OmRefCntPtr to OmRefCntBase,
	  where they belong.
	
	* Made OmRefCntPtr::operator *() return a reference as it should,
	  rather than a pointer as it did previously.

Wed May 10 17:34:16 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added (untested) TcpClient class.

Wed May 10 15:26:37 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Split all the generic socket stuff rom ProgClient into a
	  SocketClient base class.

Tue May  9 17:30:46 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added collapse code to MultiMatch.  Could be considerably more
	  efficient, but appears to work correctly.

Tue May  9 16:37:04 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Refactored mset merging code in MultiMatch::match() into separate
	  methods.  Now ready to add collapse code.

Tue May  9 16:16:06 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Network stuff should now time out if there is no response.

Tue May  9 14:45:44 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* OmMSetItems now have a collapse_key member, which the key used
	  for removal of duplicates is stored in.  This allows MultiMatch
	  to see these keys, and thus to remove duplicates across several
	  matchers, and also lets the user see the keys used.

Tue May  9 13:12:58 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* New exception: OmNetworkTimeoutError.

Tue May  9 12:21:35 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* MultiMatch::match() now returns all its results in its OmMSet
	  parameter, which is thus now fully set by this method.

Tue May  9 11:52:05 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* MultiMatch::match() takes an OmMSet instead of a vector<OmMSetItem>.
	  Next step is to make all the elements of the MSet get set correctly,
	  not just the items.

Mon May  8 19:42:48 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Stop MultiMatch going into a tight loop when waiting for sub
	  matchers to prepare_match() or get_mset(), by doing one pass of
	  non blocking IO, and then blocking IO for subsequent calls.

	* Refactor MultiMatch::match() into more separate methods.

Mon May  8 19:14:19 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* In MultiMatch::match(), factor out adding of a new mset to
	  a separate method, add_next_sub_mset().

Mon May  8 16:42:24 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Moved specification of mset comparison method into Match Options.
	  Renamed the comparator class OmMSetCmp (from MSetCmp), and created
	  a method in OmMatchOptions to return an appropriate instance.
	  Made comparator a member of LocalMatch and MultiMatch, which gets
	  set by the set_options() method.

Mon May  8 16:33:16 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Moved testsuite module to a new directory.  Tests within the
	  other source directories should be able to link to it easily.

Mon May  8 14:34:21 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Moved mostly common implementation of test suite main() functions
	  into test_driver::main().

Fri May  5 18:55:31 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Pass MatchOptions object down to LocalMatch, rather than
	  interpreting at API level.

Fri May  5 16:55:57 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Add option to MatchOptions to set a maximum number of terms to
	  OR together in large probabalistic queries.

Thu May  4 16:58:08 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* ProgClient::get_mset() now returns actual results rather than
	  accidentally made up numbers.

Thu May  4 16:26:34 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* The testsuite driver now supports running a single test by name.

	* apitest and internaltest now support an extra argument which
	  specifies the name of a single test to run.

Tue May  2 18:56:20 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* get_mset() now actually asynchronous.

Tue May  2 18:22:31 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* The framework for making get_mset() asynch is there.

Tue May  2 16:21:57 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* prepare_match() is now actually asynchronous

Tue May  2 14:35:01 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Changed signature of Match::prepare_match() to allow for
	  asynchronous processing.

Fri Apr 28 18:55:12 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Begun process of making OmDatabaseGroup use reference counted
	  databases, rather than just the parameters, so that we can add
	  opened database objects to a database group.

Fri Apr 28 17:51:06 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added configure checking for getopt.h

Fri Apr 28 17:17:23 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Add insure and purify configure options.

Fri Apr 28 16:22:56 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added checking for -lsocket on Solaris

Fri Apr 28 10:27:06 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* ProgServer exits when it receives "QUIT"

	* ProgClient sends "QUIT" before exiting.

Thu Apr 20 18:00:36 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* StatsSource now has two varients - LocalStatsSource and
	  NetworkStatsSource
	
	* Some changes to the prototype protocol

	* ProgClient and ProgServer use OmLineBuf to share code

	* Some code moved around

Thu Apr 20 17:52:49 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* New OmLineBuf object to handle line buffering over a connection

Thu Apr 20 15:38:39 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Declare this to be version 0.1.3

Thu Apr 20 14:37:14 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Fixed main part of bug with MSet docid merging in MultiMatch.
	  Will still fail to do collapse operation across multiple databases.

Thu Apr 20 13:20:33 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Fixed some memory leaks.

Thu Apr 20 13:06:49 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added a test for multimatch's document ID merging to apitest

Thu Apr 20 12:53:12 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added some memory leak checking in the test suite driver.

Thu Apr 20 12:06:18 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Stopped SleepyDatabase aborting nastily when an attempt to
	  open in a non existent directory is performed.

Wed Apr 19 18:45:21 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* parameter checks when opening databases now throw
	  OmInvalidArgumentError exceptions, rather than just being Asserts.

Wed Apr 19 18:10:31 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Changed PostList::get_position_list() to be non-const, since it
	  modifies the PostList in many implementations.

	* Implemented SleepyPositionList.

Wed Apr 19 16:47:49 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added a PositionList base class, and methods to return position
	  lists from postlists.  No actual PositionLists yet implemented.

	* Fixed a resource (memory and file descriptor) leak in Muscat36
	  backends.

Tue Apr 18 16:42:03 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Made OmDocumentContents contain OmDatas and OmKeys rather than
	  strings.  Added constructors to OmData and OmKey.

Tue Apr 18 15:43:30 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* StatsGatherer now knows about its associated StatsSource objects.

	* StatsGatherer is now responsible for calling
	  StatsSource::contrib_my_stats() on all its children, instead
	  of LocalMatch::prepare_match().

Mon Apr 17 17:48:48 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Implemented sleepycat termlists.

Fri Apr 14 17:22:04 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added quickstart guide to documentation.

	* Declare this to be Version 0.1.2

Thu Apr 13 11:05:31 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Document data storage implementation done.  Sleepydatabase now
	  functions for simple retrieval: missing is general database
	  statistics (eg, get_doccount() always returns 1), and storage of
	  keys.

Thu Apr 13 01:37:41 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added SleepyDocument class, to store keys and document data.
	  Implementation not yet done.

Wed Apr 12 19:31:21 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* API change - added a termfreq member to OmDocumentTerm.

	* SleepyDatabase now adds entries to postlists and termlists.  Doesn't
	  yet store documents, or correct already existing wdfs in termlists.

Wed Apr 12 17:36:58 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added internal test to check that SleepyList packs and unpacks
	  correctly.

Wed Apr 12 16:22:39 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* libomus-config now gives flags required to link with dependent
	  libraries (as determined by libtool).

Wed Apr 12 15:50:41 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* add_document methods now all return a om_docid value (rather than
	  void)

Wed Apr 12 15:49:17 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* MultiMatch now takes an optional StatsGatherer argument to
	  its constructor.

Wed Apr 12 14:03:52 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* IRDatabase now inherits from OmRefCntBase: we have multiple
	  inheritance!  This means that we can now have refernce counted
	  access to databases from the API.

	* OmWritableDatabase is now implemented in the API, opens the
	  database, and is well defined.  add_document() is the only method
	  not yet implemented, and simply throws an exception.

	* simpleindex example now compiles, links, runs, and reports an
	  exception.

Wed Apr 12 13:22:26 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Sorted out the mutex situation with Om/LeafDocument.

Tue Apr 11 22:01:03 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Renamed DocumentContents and DocumentTerm to OmDocumentContents and 
	  OmDocumentTerm, and added these classes to the API.  Moved these
	  from "common/document_contents.h" to "include/om/omindexdoc.h"

	* Added a OmWritableDatabase class to the API.  Implemented some of
	  the needed methods.

Tue Apr 11 21:14:18 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* SleepyDatabase now knows how to allocate a new term ID for a new
	  term, and does some of the needed actions to add a new document to
	  the database.

Tue Apr 11 19:18:34 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Backwards incompatible API CHANGE:
	  OmDatabase renamed to OmDatabaseGroup, since this is what it is,
	  and better to change it sooner than later.
	  No work other than renaming the class should be neccessary to fix
	  old code.

Tue Apr 11 18:05:51 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Rework of indexer classes.  The indexer destination interface now
	  has only one method, which is add_document.  This gets passed
	  a DocumentContents, so the whole document is added to the database
	  at once.  Works for all backend types except sleepycat.  (Although
	  all except InMemory throw an OmUnimplemented exception.)

Tue Apr 11 13:59:24 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* More detection stuff for sleepycat library: now works on all my
	  machines, but isn't really generic enough yet.

	* SleepyList now has methods to iterate through the list.

Thu Apr  6 00:57:46 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* More sleepycat stuff:
	  o) Generic list implementation now allows items to be added, lists
	     to be written to databases, and lists to be read back from
	     databases.  Doesn't yet allow iteration through lists.
	  o) PostLists can be opened using the list implementation, and sizes
	     returned, but all other functionality not there yet.

	* Modifications to the configure system: now picks up sleepycat stuff
	  on my home machine.

Tue Apr  4 18:49:15 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Generic list implementation for sleepycat is now almost complete
	  (doesn't yet write lists, but all the other code is there).  Fully
	  untested, obviously.

Tue Apr  4 14:49:09 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* A really hacked network multimatch gets the same results as
	  the multidb1 test in apitest.  Much cleanup needed.

Mon Apr  3 17:55:04 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Removed open() method from IRDatabase().  Use constructor to open
	  database instead: this is _much_ cleaner.

Fri Mar 31 19:00:50 BST 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* First remote mset retrieved.  Still doesn't complete the whole
	  match process, but getting there.

Wed Mar 29 18:01:46 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Split sleepycat database stuff into separate files, and made it
	  compile on a debian system.  (Needs autoconf detection of sleepycat
	  db.)

Tue Mar 28 18:43:16 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Lots of documentation comments in database.h

	* Changed signature of IRDatabase::open_post_list() so that it
	  doesn't take an rset:  was never used (weight is told directly
	  instead.)

Tue Mar 28 14:07:21 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Fix for a bug with setting query from vector.

	* Added test case for the bug.

Tue Mar 28 11:17:23 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Now builds query tree when prepare_match() is called, so correct
	  stats get shared again.

Mon Mar 27 18:36:06 BST 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Renamed SingleMatch::match() to SingleMatch::get_mset()

	* Added SingleMatch::prepare_match() to be called before get_mset()
	  or get_max_weight(), which flushes the statistics with the
	  StatsGatherer.

Fri Mar 24 17:56:41 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added a NetClient interface for remote matchers

	* Implemented ProgClient as a convenient test implementation

	* Added an OmNetworkError exception class

	* Documentation doesn't get built by default

Fri Mar 24 17:39:37 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added OmDocumentParams class, to provide opaque but clean way
	  to give parameters to OmDocument constructor.

	* Cleaned up various OmLock mutexes; made them private and made the
	  classes lock them when public methods are called, rather than
	  expecting the calling class to lock them.

	* Now follow policy of not calling public methods from within
	  same class.

	* Added many documentation comments, mainly to API code, but also
	  generally.

Fri Mar 24 13:41:17 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added net/ directory with (very) start of remote match code.

Thu Mar 23 15:00:54 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* MultiMatch now takes care of its own StatsGatherer

	* MultiMatch now owns the RSet and SingleMatch objects given
	  to it, and will delete them.

Thu Mar 23 12:49:03 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Changed OmKey to use a string rather than an integer for the
	  key value.

	* Added ability for DA and DB databases to read keys from a fast
	  access separate keyfile, falling back to reading from the record 
	  if the keyfile isn't present, or doesn't contain enough keys.

	* Changed parameters for DA and DB database slightly.  Change is
	  backwards compatible.

Wed Mar 22 18:39:03 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added configure option to turn on profiling.

Tue Mar 21 15:41:49 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Tidy up structure of LeafMatch a great deal.

	* Fix bug causing a segfault when a term which doesn't exist comprises
	  the entire query.

Tue Mar 21 15:26:03 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Test behaviour when searching for terms not in database.

Tue Mar 21 15:08:11 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Implemented OmQueryInternal::operator=()

Tue Mar 21 11:42:39 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Fixes to m4 macro.  Now works correctly in both installed and
	  uninstalled cases.

Mon Mar 20 13:02:37 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Removed old Match::boolmatch() methods - superceded.

Mon Mar 20 12:50:40 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Made OmEnquire use reversebool when specified in moptions.
	  All tests now pass!

Mon Mar 20 12:23:03 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Made OmEnquire use BoolWeight to get result for boolean queries.
	  Doesn't yet pass correctness tests.

Mon Mar 20 12:21:19 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added an internaltest test for the refcounted pointers

Fri Mar 17 18:55:40 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added BoolWeight object, returns zero for all methods, for pure
	  boolean queries.

Fri Mar 17 18:38:18 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added set_weighting() method to match, to set weighting scheme
	  to be used (as a value from the IRWeight::weight_type enum).
	  Updated OmEnquire to use this: ability to set weight is just
	  one little step away from the API and the user now.

Fri Mar 17 13:39:10 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Declare this to be version 0.1.1

Thu Mar 16 17:33:36 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* New program "internaltest" added to the test suite, for
	  testing code behind the API.

	* Can now disable pthread support via configure

Thu Mar 16 13:01:46 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Fixes for uninitialised memory problems.  (malloc was being
	  assumed to zero the returned memory.)

Thu Mar 16 12:49:44 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* New OmDocument which is copyable, and is actually a wrapper
	  around LeafDocument.

	* Added reference-counted smart pointer, used in above.

Wed Mar 15 18:27:10 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Now uses a MultiMatch object to do match.  Doesn't yet use more
	  than one LeafMatch for this object though.

Tue Mar 14 18:46:17 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Match now has the appropriate virtual methods, which are
	  implemented by LeafMatch, and will be implemented by MultiMatch.
	  Some work in OmEnquire, so that I can test this.

Tue Mar 14 13:33:43 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Make sure we don't have -g in compile line if debugging is off.

Thu Mar  9 17:12:16 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Declare this to be version 0.1.0

Thu Mar  9 17:48:02 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Fix many spurious debugging messages

Thu Mar  9 17:03:35 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added test for OmBatchEnquire (and fixed a bug in it)

Thu Mar  9 16:00:18 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Don't use -O6 when debugging is turned on.  Debug compiles
	  are much faster now.

Thu Mar  9 15:46:17 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Stemtest.pl now cleans up after itself a bit better.

Thu Mar  9 15:17:47 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Use Stats objects to pass statistics needed for the match around,
	  instead of directly asking the database.

	* Change parameters for BM25Weight: attach less importance to
	  document length.

	* Now copes with empty sub-databases rather better.

	* Calculate max_possible_weight (and thus percentages) correctly
	  when using BM25Weight.  (Had forgotten additive parameter.)

	* More debugging messages available.

Thu Mar  9 11:20:55 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Removed inline from omenquireinternal methods.

Wed Mar  8 18:24:27 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added OmBatchEnquire for batch queries.

Tue Mar  7 18:09:36 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added configure option to use error-checking mutexes instead
	  of the (portable) default.

Tue Mar  7 12:20:08 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Sleepycat backend now compiles, although undoubtably isn't
	  going to work properly.

Tue Mar  7 12:17:47 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added OmRangeError and OmDatabaseError exceptions.

Mon Mar  6 18:05:17 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* stemtest.pl now handles the child getting a Ctrl-C nicely.

Fri Mar  3 15:25:42 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added to one of the tests in apitest a check that the weights
	  returned by a query are as expected.  This will fail if weighting
	  schemes are changed, deliberately or accidentally.

Fri Mar  3 11:25:36 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* OmQuery now does a better job of collapsing sub-queries
	  with the same operator.  Yet another test now passes.

Thu Mar  2 17:47:29 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Moved omenquire and omstem into new directory api

	* Split omenquire.cc into omenquire, omquery, and omdatabase

Thu Mar  2 14:53:47 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Removed all mentions of virtual inheritance.
	
Thu Mar  2 10:58:19 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Begun to abstract statistics requesting and collecting operations
	  (common/stats.h)

	* Made heirarchy of Match objects: Match, LeafMatch, MultiMatch.

Thu Mar  2 10:39:20 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added locks to OmDatabase methods

Wed Mar  1 19:14:02 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Separated OmDatabase out from OmEnquire, and fixed the tests.

Tue Feb 29 17:41:32 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Change OmMatch to LeafMatch.  Make LeafMatch inherit from Match,
	  which is currently an empty class, but will be a base class for
	  all match objects.

Tue Feb 29 10:49:54 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Fixed apitest following the stemming changes

	* Fixed a bug which broke query length calculation

Mon Feb 28 17:26:01 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added a test for the query collapsing, along with a fix.

Mon Feb 28 16:32:22 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Queries now combine identical terms into a single term
	  with the sum of the wqfs in some cases.

Mon Feb 28 13:09:18 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Query lengths are now automatically calculated

	* Some tests of the query length calculation are now in apitest

Fri Feb 25 16:38:46 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added a test for -Wno-long-long in configure.in

Fri Feb 25 14:29:00 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Separated most of OmQuery into an OmQueryInternal class.

	* Locks in the OmQuery methods

Thu Feb 24 20:10:28 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added test for behaviour when trying to use a file which doesn't
	  exist.

Thu Feb 24 16:12:16 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Changed DBPostlist to LeafPostlist.

	* Added DBDatabase and related classes, for reading DB format (old
	  muscat) databases.

Thu Feb 24 14:36:45 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added locking to OmStem

Thu Feb 24 14:18:29 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Cleaned up the public/private separation in OmEnquire{Internal}

	* Added exclusive locks to all public methods

Wed Feb 23 19:00:10 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added initial pthread locking support.  More does need to be
	  done.

Wed Feb 23 17:33:43 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added a test "includetest" which simply checks that a program
	  which includes all headers in the project compiles.

Wed Feb 23 14:46:16 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Muscat36 backend now replaces DA backend.
	  Should be able to cope with both flimsy and heavy duty DA files.
	  DB stuff will be added shortly.

Wed Feb 23 14:44:58 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added (mostly private unimplemented) copy-constructors and
	  assignment operators to several classes.  Also added some
	  virtual destructors where needed.

Mon Feb 21 18:07:14 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Attempts to build a query with a boolean subquery throws an
	  exception for now.

Mon Feb 21 15:33:10 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added test for OmEnquire::get_matching_terms()

	* Fixed OmEnquire::get_matching_terms

Mon Feb 21 14:38:30 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Made OmQuery::get_terms() public, tightened the specification,
	  and made it conform to the specification.
	
	* Added a test for the above to apitest

	* Fixed a bug in OmQuery::initialise_from_copy() to make the above
	  test work.

Fri Feb 18 18:06:21 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Databases now have a get_doclength() method, to return the length
	  of a given document.  There may be efficiency issues with using
	  this during the search, however.

	* Extra constant terms, such as that in BM25Weight, now used
	  and accounted for in min weight calculations.

Fri Feb 18 17:49:13 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* OmQuery::get_terms now returns the terms in termpos order.

Fri Feb 18 13:53:34 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

        * Added second test for reversed boolean queries.
	  (When the full mset is not returned.)

Fri Feb 18 13:54:37 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Implemented match functors

	* IRDocument is now OmDocument, on <om/omdocument.h>

Fri Feb 18 13:53:34 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added test for reversed boolean queries.

Thu Feb 17 18:13:24 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added a test for collapsing on a key

Thu Feb 17 16:57:42 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added interface to stemming algorithms to API (OmStem class)

Thu Feb 17 12:00:33 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Header files now get installed in a subdirectory (om/)

Tue Feb 15 17:03:31 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Implemented the "allow query terms" option for Expand Terms.

	* Added some useful ExpandDeciders to omenquire.h

Tue Feb 15 12:59:43 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* The dvi documentation is now automatically built and added
	  to the distribution.

Mon Feb 14 17:23:38 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Implemented OmQuery::get_terms()

	* Implemented OmEnquire::get_matching_terms()

Mon Feb 14 13:37:56 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added tests for OmExpandOptions and OmMSet.max_attained

Fri Feb 11 18:40:39 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Fixed the percent cutoff test in apitest.

Fri Feb 11 17:52:42 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added percent cutoff to the API, and added a test to apitest
	  for it.

Fri Feb 11 16:44:34 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* The api docs now go into the distribution tarball.

Thu Feb 10 18:53:33 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added OmEnquire::get_matching_terms() to the API.

Thu Feb 10 18:02:37 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added tests to apitest for the match and expand decision functors,
	  and added another shorthand function to reduce code duplication.

Thu Feb 10 16:04:45 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* More documentation in omenquire.h

	* Changed isnull to isdefined (note change of sense), since this makes
	  more sense, and is hopefully less likely to confuse.

Thu Feb 10 14:17:31 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Lots more documentation comments in omerror.h and omenquire.h

	* Added API calls to set decision functors for matcher - not yet
	  implemented, however.

Wed Feb  9 17:11:13 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Implemented far enough for it to compile.
	  (Doesn't calculate query length automatically)

Wed Feb  9 16:45:19 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added calls to specify within query frequency, positional
	  information, and query length.  Not yet implemented.  (So, won't
	  compile.)

	* Can set boolean flag on a query directly.

	* Many documentation comments added to header files in include/

Wed Feb  9 16:42:08 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* stemtest.pl handling of random input data improved:

	  o doesn't bother regenerating the random data every time.

	  o the seed is actually generated from the hostname, rather
	    than being hard-coded to 1.

	  o support for running the test with a specified seed

	  o some basic tests that the output is sensible

Wed Feb  9 14:52:54 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Rename all exception classes to have names ending in Error

Wed Feb  9 14:48:48 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added and implemented get_doc_data in OmEnquire

	* Now get msets and esets by return value rather than reference
	  argument.

Wed Feb  9 11:18:48 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Fixed the header guards (now all caps, should be unique, and don't
	  start with underscores).

Tue Feb  8 20:04:34 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Changed prefix OM to Om in all class names.

Tue Feb  8 19:17:53 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

        * Changed OMMSet::max_weight to OMMSet::max_possible.
          Added OMMSet::max_attained, which is weight of top match, (not
          neccessarily top item in MSet)

        * Allow user to specify decision function for expand.

        * Also allow user to specify that query terms should not be returned
          by expand, by calling OMExpandOptions::use_query_terms().                       This does not yet work, however.

        * Add many code comments, and make doc++ stuff work better.

Tue Feb  8 19:13:43 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added some more tests.

Tue Feb  8 16:51:22 GMT 2000 Richard Boulton <richard.boulton@open.muscat.com>

	* Fixed boolean only querying.

	  o) Made isbool get set correctly (was being unset by
	    initialise_from_copy)

	  o) Set max_weight correctly.

Tue Feb  8 16:28:48 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added the stemmer test script, stemtest.pl

Mon Feb  7 19:17:25 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Prefix all the types in omtypes.h with "om_".

Mon Feb  7 17:37:52 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Added a test of boolean-only queries to apitest, which fails.

Mon Feb  7 15:56:43 GMT 2000 Chris Emerson <chris.emerson@open.muscat.com>

	* Improved exception hierarchy:

	  o Exceptions are all split between `OmLogicError' and
	    `OmRuntimeError'.
	    
	  o Plain `OmError' exceptions are no longer allowed.

	  o All exception classes are prefixed with `Om'.

Mon Feb  7 12:57:12 GMT 2000 Richard Boulton <richard.boulton@open.muscat.com>

	* Make get_eset()'s max_items parameter work.
          (Changed max_esize in OMExpand from a member to a parameter of
	  expand() )

	* Implemented add_database() correctly in OMEnquire: can now do
	  multi database stuff.

Mon Feb  7 12:53:33 GMT 2000  Chris Emerson <chris.emerson@open.muscat.com>

	* Added tests to apitest for maxitems parameters and null queries

Mon Jan 31 17:00:18 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* OMMatch stores query in a pointer rather than the historical
	  remnants of a stack.
	  OMEnquire updated accordingly.

	* OMEnquire deallocates RSet correctly.

	* querygui example compiles and works.

Fri Jan 28 16:44:49 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Fixed problems with assigning to a query (old query elements were
	  left in place.)  Implemented automatic merging of OR and AND nodes
	  into a single list of terms to be ORed or ANDed.

Fri Jan 28 15:53:53 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Added introspection methods to OMQuery.

Fri Jan 28 13:41:20 GMT 2000  Richard Boulton <richard.boulton@open.muscat.com>

	* Started Changelog

	* Previous state of code:

	  o An API for searching has just been created, but is undocumented,
	    will change in various ways in the coming weeks, and isn't quite
	    implemented correctly when building queries containing more than
	    one term.

	  o Stemming algorithms for dutch, english, french, german, italian,
	    portuguese and spanish added and tested.

	  o Searching through DA databases, raw text files (with naive
	    indexer) and multiple databases implemented.

	  o Documentation in a reasonably sorry state.  Next week is
	    documentation week.
