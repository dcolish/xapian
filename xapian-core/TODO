This file contains items which need to be worked on.


Priority values, in decreasing priority order, are:

 Urgent  - can't do anything else until this is done.
 High    - must be done as soon as possible.
 Medium  - should be done fairly soon.
 Low     - not needed soon.
 Verylow - do when there is nothing else to do.
 Dubious - not sure that we want to do this.

Little Jobs
===========

         |                 |
Priority | Area            | Task
---------+-----------------+--------------------------------------------------
 High    |CDistribution    | Make the network server better (multithreaded
         |                 | etc.).
---------+-----------------+--------------------------------------------------
 High    |CDistribution    | Make timeouts configurable with a sensible
         |                 | default.
---------+-----------------+--------------------------------------------------
 High    | Tests	   | Make apitest's tests use da/db backends as well
---------+-----------------+--------------------------------------------------
 High    | LocalMatch      | Pass around partially created postlist as an
         |                 | auto_ptr, for exception safety.
---------+-----------------+--------------------------------------------------
 High    | OmDatabase      | Test that sessions get ended correctly if class
         |                 | is destroyed without the explicit finishing
	 |                 | methods being called.
---------+-----------------+--------------------------------------------------
 Medium  | OmDatabase      | Make sure that end_session() gets called from
         |                 | destructor if a session is in progress.
---------+-----------------+--------------------------------------------------
 Medium  | Exceptions      | Make exceptions threadsafe: see
	 |                 | http://metalab.unc.edu/pub/Linux/docs/faqs/SMP-FAQ
	 |                 | GCC (and EGCS) need existence of exceptions to
	 |                 | be protected by a mutex - will need to cope with
	 |                 | exception being copied.
---------+-----------------+--------------------------------------------------
 Medium  | Documentation   | Patch doxygen, so that todo items in the body of
         |                 | methods get displayed.
---------+-----------------+--------------------------------------------------
 Medium  | API             | OmDocumentTerm should use a set rather than a
         |                 | map.
         |                 | FIXME: OmDocumentTerm doesn't use either -
         |                 | OmDocumentContents uses a map, but a set isn't
         |                 | a suitable replacement...
---------+-----------------+--------------------------------------------------
 Medium  | OmDatabase      | Test assignment operators for OmDatabase and
         |                 | OmWritableDatabase
---------+-----------------+--------------------------------------------------
 Medium  | LocalMatch      | Make query a local variable of get_mset(), rather
         |                 | than a member of the class.
---------+-----------------+--------------------------------------------------
 Medium  | Matchers        | Make get_mset() (and MultiMatch::match()) return
         |                 | msets rather than setting a pass by reference
	 |                 | parameter.  Change match() to get_mset().
---------+-----------------+--------------------------------------------------
 Medium  | Databases       | Make OmDatabaseGroup::Internal return same
         |                 | multidatabase object if get_multi_database() is
	 |                 | called repeatedly without calling add_database()
	 |                 | in-between.
---------+-----------------+--------------------------------------------------
 Medium  | LocalMatch      | Test performance when nth_element is run more
         |                 | or less frequently, to see what is best.
---------+-----------------+--------------------------------------------------
 Medium  | General         | Check that it is safe for an exception to be
         |                 | thrown and caught within a destructor, when that
	 |                 | destructor is being called due to an exception
	 |                 | unwinding the stack.  eg, a database is
	 |                 | destroyed due to an exception, database's
	 |                 | destructor calls internal_end_session() which
	 |                 | throws an exception (which is caught and handled
	 |                 | by the destructor): is this safe - two exceptions
	 |                 | exist simultaneously.
---------+-----------------+--------------------------------------------------
 Medium  | Exceptions      | Throw an OmFeatureUnavailableError() exception
         |                 | whenever a task can't be performed because
	 |                 | something isn't compiled in.
---------+-----------------+--------------------------------------------------
 Medium  | Exceptions      | Make them work with shared libs on solaris /
         |                 | find an alternative.
---------+-----------------+--------------------------------------------------
 Medium  | Options         | Use OmSettings for specifying what debugging info
	 |                 | to output
---------+-----------------+--------------------------------------------------
 Medium  | Postlist        | Add ability to retrieve collection frequency
         |                 | (ie, sum of wdfs).
---------+-----------------+--------------------------------------------------
 Medium  | WritableDbs     | Make add_document() atomic.
---------+-----------------+--------------------------------------------------
 Medium  | WritableDbs     | Add pthread locking to all database classes.
---------+-----------------+--------------------------------------------------
 Medium  | Databases       | Ensure that opening a termlist which
         |                 | is not present throws the correct exception.
---------+-----------------+--------------------------------------------------
 Medium  | Documentation   | Ensure that API documentation covers entirety of
         |                 | API.  Then rewrite it for clarity.
---------+-----------------+--------------------------------------------------
 Medium  | Documentation   | Document backend API (database, postlist,
         |                 | termlist, document, etc) in same way as enquire
	 |                 | API.
---------+-----------------+--------------------------------------------------
 Medium  | Positional      | Pass within-query-frequency and query length
	 |                 | information to matcher.
---------+-----------------+--------------------------------------------------
 Medium  |RPositional      | Add a get_position_list() method to databases.
---------+-----------------+--------------------------------------------------
 Medium  | Positional      | Implement get_position_list() method on operators
	 |                 | so that (A OR B) NEAR (C AND D) works.
---------+-----------------+--------------------------------------------------
 Medium  | General / API   | Put Om into its own namespace, to ensure lack of
         |                 | symbol conflicts.
---------+-----------------+--------------------------------------------------
 Medium  | Bindings        | Ensure that (Java in particular) bindings throw
         |                 | correct exception types.
---------+-----------------+--------------------------------------------------
 Medium  | General         | Make om_queryop a member of OmQuery, as far as
	 |                 | the API is concerned.  Have an internal typedef
	 |                 | so that this isn't inappropriate internally.
---------+-----------------+--------------------------------------------------
 Medium  | API             | Test OmMSet::get_termfreq() and
         |                 | OmMSet::get_termweight().
---------+-----------------+--------------------------------------------------
 Medium  | Matchers        | Deprecate get_max_weight() - not useful
         |                 | independently of get_mset(), which now returns
	 |                 | its value.
---------+-----------------+--------------------------------------------------
 Medium  | MultiDatabase   | Termcache currently clears itself when full: make
         |                 | more efficient.
---------+-----------------+--------------------------------------------------
 Medium  | Stemming        | Make a separate package to contain stemming
         | Algorithms      | algorithm stuff (docs, code, stemtest)
---------+-----------------+--------------------------------------------------
 Low     | Purify          | Write autoconf macro to turn on purify support.
         |                 | Submit to http://peti.cys.de/autoconf-archive/
---------+-----------------+--------------------------------------------------
 Low     | Documentation   | Add notes about catching exceptions throughout
         |                 | userman, particularly in examples (eg, search
	 |                 | engine example)
---------+-----------------+--------------------------------------------------
 Low     |cBackends        | Use pthread locks around inmemory methods
---------+-----------------+--------------------------------------------------
 Low     | Backends        | Use pthread locks around database methods
---------+-----------------+--------------------------------------------------
 Low     | Website         | Put TeX documentation on website.
---------+-----------------+--------------------------------------------------
 Low     | Backends        | Stop d[ba]read from exporting junk symbols
---------+-----------------+--------------------------------------------------
 Low     | InMemory        | Make InMemoryDatabase allow
         |                 | <size of position vector> != <wdf>, ie, if
	 |                 | posting is made and position is already there,
	 |                 | leave position vector same but increment wdf.
---------+-----------------+--------------------------------------------------
 Low     |RPositional      | Use within query frequency and query length
	 |                 | information in matcher.
---------+-----------------+--------------------------------------------------
 Low     |cGeneral         | Audit for exception safety.
---------+-----------------+--------------------------------------------------
 Low     |cTODO            | Write some VIM macros to deal with this TODO
---------+-----------------+--------------------------------------------------
 Verylow | General         | Improve performance using SIMD instructions
---------+-----------------+--------------------------------------------------
 Verylow | General         | Make backends / weighting schemes / indexer
	 |                 | modules register themselves automatically.  At
	 |                 | runtime / linktime?  (ie, replace current
	 |                 | conditional compilation scheme)
---------+-----------------+--------------------------------------------------
 Verylow | Backends        | Split database definition files into
	 |                 | database/postlist/termlist files.
---------+-----------------+--------------------------------------------------
 Verylow | General         | A couple of objects get copied a lot - look into
         |                 | doing copy-on-write for them.  (Notably term
	 |                 | objects (currently strings so this happens, but
	 |                 | may not stay that way) and ExpandBits)
---------+-----------------+--------------------------------------------------
 Verylow | API		   | Do allow boolean subqueries in OmQuery
         |                 | constructors, where it makes sense.
---------+-----------------+--------------------------------------------------
 Dubious | Weighting       | Allow for a non-zero minimum value for the ndl
	 |                 | (normalised doc len).
---------+-----------------+--------------------------------------------------
 Dubious | Matcher         | Boolean filters result in collection statistics
         |                 | being for the wrong set of documents (should be
  	 |                 | appropriate subset)
---------+-----------------+--------------------------------------------------


Big Jobs
========

         |                 |
Priority | Area            | Task
---------+-----------------+--------------------------------------------------
 High    |CAPI             | Write bindings for other languages (Java, C,
         |                 | perl, python, etc.). [In progress, apart from C].
---------+-----------------+--------------------------------------------------
 High    | Performance     | Write (speed) performance test suite.
---------+-----------------+--------------------------------------------------
 High    |CIndexer         | Write indexer modules.
---------+-----------------+--------------------------------------------------
 Low     | Positional      | Passage retrieval.
---------+-----------------+--------------------------------------------------
 Low     | Matcher         | Clustering algorithms.
---------+-----------------+--------------------------------------------------
